# Redis Sentinel Configuration
# Для обеспечения высокой доступности Redis

# Порт Sentinel
port 26379

# Рабочая директория
dir /tmp

# Логирование
logfile /var/log/redis/sentinel.log
loglevel notice

# Мониторинг мастера
# sentinel monitor <master-name> <ip> <redis-port> <quorum>
sentinel monitor mymaster 127.0.0.1 6379 2

# Пароль для подключения к Redis
sentinel auth-pass mymaster ${REDIS_PASSWORD}

# Таймауты
sentinel down-after-milliseconds mymaster 5000
sentinel parallel-syncs mymaster 1
sentinel failover-timeout mymaster 10000

# Уведомления
sentinel notification-script mymaster /opt/redis/notify.sh
sentinel client-reconfig-script mymaster /opt/redis/reconfig.sh

# Защита от сплит-брейна
sentinel deny-scripts-reconfig yes

# Настройки для production
protected-mode yes
supervised systemd
pidfile /var/run/redis-sentinel.pid
daemonize yes