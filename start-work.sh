#!/bin/bash

# AI Admin v2 - Quick Start Script
# –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø–æ–º–æ–∂–µ—Ç –±—ã—Å—Ç—Ä–æ –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É –∏ –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç

echo "üöÄ AI Admin v2 - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Ä–∞–±–æ—Ç—ã"
echo "====================================="
echo ""

# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ git —Å—Ç–∞—Ç—É—Å–∞
echo "üìã Git —Å—Ç–∞—Ç—É—Å:"
git status --short
echo ""

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ Redis —Ç—É–Ω–Ω–µ–ª—è
echo "üî¥ Redis —Ç—É–Ω–Ω–µ–ª—å:"
./scripts/maintain-redis-tunnel.sh status
echo ""

# 3. –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–µ –∑–∞–¥–∞—á–∏
echo "üìù –¢–µ–∫—É—â–∏–µ –∑–∞–¥–∞—á–∏ –∏–∑ TASK.md:"
echo "----------------------------"
grep -A 5 "^### üî¥ High Priority" TASK.md | head -10
echo ""

# 4. –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
echo "üìä –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∫–æ–º–º–∏—Ç—ã:"
git log --oneline -5
echo ""

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
echo "üñ•Ô∏è  –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:"
ssh ai-admin-server "pm2 status" 2>/dev/null || echo "‚ùå SSH –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
echo ""

# 6. –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –∑–∞–ø–∏—Å—å –∏–∑ –¥–Ω–µ–≤–Ω–∏–∫–∞
echo "üìî –ü–æ—Å–ª–µ–¥–Ω—è—è –∑–∞–ø–∏—Å—å –≤ –¥–Ω–µ–≤–Ω–∏–∫–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:"
if [ -d "docs/development-diary" ]; then
    LAST_ENTRY=$(ls docs/development-diary/*.md 2>/dev/null | grep -v README | sort -r | head -1)
    if [ -n "$LAST_ENTRY" ]; then
        echo "- $(basename "$LAST_ENTRY" .md | sed 's/-/ /g')"
    fi
fi
echo ""

# 7. –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –≤–∞–∂–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö
echo "üìö –í–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:"
echo "- CLAUDE.md - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏ —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å"
echo "- TASK.md - —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á"
echo "- RECOMMENDATIONS.md - —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é"
echo "- docs/TROUBLESHOOTING.md - —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º"
echo "- docs/guides/AI_ADMIN_FEATURES_CHECKLIST.md - —á–µ–∫-–ª–∏—Å—Ç —Ñ—É–Ω–∫—Ü–∏–π"
echo "- docs/development-diary/ - –∏—Å—Ç–æ—Ä–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏"
echo ""

# 7. –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ—à–∏–±–∫–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
echo "‚ö†Ô∏è  –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:"
grep -A 2 "^### Pending" CLAUDE.md | head -5
echo ""

# 8. –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã
echo "üõ†Ô∏è  –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:"
echo "-------------------"
cat << 'EOF'
# –ó–∞–ø—É—Å—Ç–∏—Ç—å Redis —Ç—É–Ω–Ω–µ–ª—å:
./scripts/maintain-redis-tunnel.sh start

# –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:
node test-webhook.js "—Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
ssh ai-admin-server "pm2 logs ai-admin-worker-v2 --lines 50"

# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å GitHub –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å:
git push && ssh ai-admin-server "cd /opt/ai-admin && git pull && pm2 restart all"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å health API:
curl -s http://46.149.70.219:3000/health | jq .
EOF
echo ""

echo "‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ!"
echo ""
echo "üí° –°–æ–≤–µ—Ç: –ù–∞—á–Ω–∏—Ç–µ —Å –ø—Ä–æ—á—Ç–µ–Ω–∏—è CLAUDE.md –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞"