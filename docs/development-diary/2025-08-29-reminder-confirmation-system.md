# –°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

**–î–∞—Ç–∞**: 29 –∞–≤–≥—É—Å—Ç–∞ 2025
**–ê–≤—Ç–æ—Ä**: AI Admin Development Team

## –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏ –ø—Ä–æ–±–ª–µ–º–∞

–ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –æ –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö –∑–∞–ø–∏—Å—è—Ö –∫–ª–∏–µ–Ω—Ç—ã —á–∞—Å—Ç–æ –æ—Ç–≤–µ—á–∞—é—Ç –ø—Ä–æ—Å—Ç—ã–º–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è–º–∏ —Ç–∏–ø–∞ "–æ–∫", "—Å–ø–∞—Å–∏–±–æ", "–±—É–¥—É". –°–∏—Å—Ç–µ–º–∞ AI Admin –Ω–µ –ø–æ–Ω–∏–º–∞–ª–∞, —á—Ç–æ —ç—Ç–æ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è, –∏ –Ω–∞—á–∏–Ω–∞–ª–∞ –Ω–æ–≤—ã–π –¥–∏–∞–ª–æ–≥ —Å –≤–æ–ø—Ä–æ—Å–æ–º "–ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?", —á—Ç–æ —Ä–∞–∑–¥—Ä–∞–∂–∞–ª–æ –∫–ª–∏–µ–Ω—Ç–æ–≤.

## –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### 1. ReminderContextTracker
–°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å `src/services/reminder/reminder-context-tracker.js`, –∫–æ—Ç–æ—Ä—ã–π:
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ Redis –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ—Å–ª–µ–¥–Ω–µ–º –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–º –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–∏
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –æ–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞ (12 —á–∞—Å–æ–≤)
- –†–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö

### 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ booking-monitor
–ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º–∞:
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –≤ Redis
- –ü–æ–º–µ—á–∞–µ—Ç, —á—Ç–æ –æ–∂–∏–¥–∞–µ—Ç—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤ message-worker-v2
–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞:
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
2. –ï—Å–ª–∏ –¥–∞, —Ç–æ:
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ä–µ–∞–∫—Ü–∏—è —Å–µ—Ä–¥–µ—á–∫–æ–º ‚ù§Ô∏è
   - –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å –∑–∞–ø–∏—Å–∏ –≤ YClients –Ω–∞ "–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω" (attendance=2)
   - –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ç–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç
   - –ù–ï –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è AI –æ–±—Ä–∞–±–æ—Ç–∫–∞

### 4. –ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
–°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:
- –ö–æ—Ä–æ—Ç–∫–∏–µ –æ—Ç–≤–µ—Ç—ã: "–æ–∫", "ok", "–¥–∞", "yes", "—Ö–æ—Ä–æ—à–æ"
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è: "–ø—Ä–∏–¥—É", "–±—É–¥—É", "–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é", "—Å–æ–≥–ª–∞—Å–µ–Ω"
- –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏: "—Å–ø–∞—Å–∏–±–æ"
- –≠–º–æ–¥–∑–∏: üëç, üëå, ‚úÖ, üíØ, +

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Redis —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```
Key: reminder_context:{phone}
TTL: 24 —á–∞—Å–∞
Value: {
  type: 'day_before' | '2hours',
  sentAt: ISO timestamp,
  booking: {
    recordId: number,
    datetime: ISO timestamp,
    serviceName: string,
    staffName: string
  },
  awaitingConfirmation: boolean
}
```

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
1. `src/services/reminder/reminder-context-tracker.js` - –Ω–æ–≤—ã–π —Ç—Ä–µ–∫–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
2. `src/services/booking-monitor/index.js` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ç—Ä–µ–∫–µ—Ä–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
3. `src/workers/message-worker-v2.js` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π
4. `src/integrations/whatsapp/client.js` - –¥–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ sendReaction
5. `src/integrations/yclients/client.js` - –¥–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ updateBookingStatus

## –†–µ–∑—É–ª—å—Ç–∞—Ç

1. **–£–ª—É—á—à–µ–Ω–Ω—ã–π UX**: –ö–ª–∏–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞—é—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ (—Å–µ—Ä–¥–µ—á–∫–æ) –≤–º–µ—Å—Ç–æ –ª–∏—à–Ω–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
2. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**: –°—Ç–∞—Ç—É—Å –∑–∞–ø–∏—Å–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –Ω–∞ "–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω" –≤ YClients
3. **–≠–∫–æ–Ω–æ–º–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤**: AI –Ω–µ —Ç—Ä–∞—Ç–∏—Ç –≤—Ä–µ–º—è –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø—Ä–æ—Å—Ç—ã—Ö –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã:
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É
2. –û—Ç–≤–µ—Ç—å—Ç–µ "–æ–∫" –∏–ª–∏ –¥—Ä—É–≥–∏–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - –ü–æ–ª—É—á–µ–Ω–∞ –ª–∏ —Ä–µ–∞–∫—Ü–∏—è —Å–µ—Ä–¥–µ—á–∫–æ–º
   - –û–±–Ω–æ–≤–∏–ª—Å—è –ª–∏ —Å—Ç–∞—Ç—É—Å –∑–∞–ø–∏—Å–∏ –≤ YClients
   - –ù–ï –ø–æ–ª—É—á–µ–Ω –ª–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç –æ—Ç –±–æ—Ç–∞

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. Venom-bot –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–∞—Å—Ç–æ—è—â–∏–µ —Ä–µ–∞–∫—Ü–∏–∏, –ø–æ—ç—Ç–æ–º—É —Å–µ—Ä–¥–µ—á–∫–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
2. –ö–æ–Ω—Ç–µ–∫—Å—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è 24 —á–∞—Å–∞, –ø–æ—Å–ª–µ —á–µ–≥–æ —É–¥–∞–ª—è–µ—Ç—Å—è
3. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ —Ç–µ—á–µ–Ω–∏–µ 30 –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è