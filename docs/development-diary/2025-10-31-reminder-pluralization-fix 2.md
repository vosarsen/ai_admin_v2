# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—Å–ª—É–≥ –≤ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è—Ö

**–î–∞—Ç–∞:** 31 –æ–∫—Ç—è–±—Ä—è 2025
**–ê–≤—Ç–æ—Ä:** Claude + –ê—Ä—Å–µ–Ω
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ –∏ –∑–∞–¥–µ–ø–ª–æ–µ–Ω–æ

## üìã –ü—Ä–æ–±–ª–µ–º–∞

–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –Ω–µ —É–∫–∞–∑—ã–≤–∞–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ª—É–≥ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —É—Å–ª—É–≥:

**–ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–±–ª–µ–º:**
- ‚ùå –ë—ã–ª–æ: "–º—É–∂—Å–∫—É—é —Å—Ç—Ä–∏–∂–∫—É –∏ –º—É–∂—Å–∫—É—é —Å—Ç—Ä–∏–∂–∫—É"
- ‚ùå –ë—ã–ª–æ: "2 –º—É–∂—Å–∫–´–µ —Å—Ç—Ä–∏–∂–∫–∏" (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–∫–æ–Ω—á–∞–Ω–∏–µ –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω–æ–≥–æ)
- ‚ùå –ë—ã–ª–æ: "3 –ø–µ–¥–∏–∫—é—Ä—ã" (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞–¥–µ–∂ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–≥–æ)
- ‚ùå –ë—ã–ª–æ: "2 –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ—Ä–æ–¥—ã" (–æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–∫–ª–æ–Ω–µ–Ω–∏—è)

## üîç –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞

1. **YClients API –ø–µ—Ä–µ–¥–∞–µ—Ç `amount` –≤ –æ–±—ä–µ–∫—Ç–µ —É—Å–ª—É–≥–∏** –∫–æ–≥–¥–∞ –æ–¥–Ω–∞ —É—Å–ª—É–≥–∞ –∑–∞–∫–∞–∑–∞–Ω–∞ –≤ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ > 1
2. **–ö–æ–¥ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª –ø–æ–ª–µ `amount`** - –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–ª –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
3. **–§—É–Ω–∫—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–ª–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —É—Å–ª—É–≥–∏**
4. **–û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ –ø—Ä–∞–≤–∏–ª–∞ —Å–∫–ª–æ–Ω–µ–Ω–∏—è** –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞:
   - –û–∫–æ–Ω—á–∞–Ω–∏—è –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã—Ö (—É—é ‚Üí –∏–µ)
   - –°—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –±–µ–∑ –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã—Ö (–º–∞–Ω–∏–∫—é—Ä, –ø–µ–¥–∏–∫—é—Ä)
   - –†–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂ –ø–æ—Å–ª–µ —á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö 2-4

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `amount` –≤ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (commit `93b6397`)

**–§–∞–π–ª—ã:** `src/sync/bookings-sync.js`, `src/sync/client-records-sync.js`

```javascript
// –î–æ
const serviceNames = services.map(s => s.title).filter(Boolean);

// –ü–æ—Å–ª–µ
services.forEach(service => {
  const amount = service.amount || 1;
  for (let i = 0; i < amount; i++) {
    if (title) serviceNames.push(title);
    if (id) serviceIds.push(id);
  }
});
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü—Ä–∏ `amount: 2` –≤ –±–∞–∑—É —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è `["–ú–£–ñ–°–ö–ê–Ø –°–¢–†–ò–ñ–ö–ê", "–ú–£–ñ–°–ö–ê–Ø –°–¢–†–ò–ñ–ö–ê"]`

### 2. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —É—Å–ª—É–≥ –≤ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è—Ö (commit `fc17e78`)

**–§–∞–π–ª:** `src/services/reminder/templates.js`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –§—É–Ω–∫—Ü–∏—è `formatServicesInCase()` —Ç–µ–ø–µ—Ä—å –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —É—Å–ª—É–≥–∏ –ø–æ `title`
- –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–ª—è –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø—ã
- –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Å —á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã–º: "2 –º—É–∂—Å–∫–∏–µ —Å—Ç—Ä–∏–∂–∫–∏" –≤–º–µ—Å—Ç–æ "–º—É–∂—Å–∫—É—é —Å—Ç—Ä–∏–∂–∫—É –∏ –º—É–∂—Å–∫—É—é —Å—Ç—Ä–∏–∂–∫—É"

```javascript
// –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —É—Å–ª—É–≥–∏
const serviceCounts = new Map();
services.forEach(service => {
  const key = service.title;
  if (!serviceCounts.has(key)) {
    serviceCounts.set(key, { service, count: 0 });
  }
  serviceCounts.get(key).count++;
});

// –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º
if (count > 1) {
  formattedGroups.push(`${count} ${pluralForm}`);
} else {
  formattedGroups.push(serviceName);
}
```

### 3. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã—Ö (commit `8028e28`)

**–ü—Ä–æ–±–ª–µ–º–∞:** "–º—É–∂—Å–∫–´–µ —Å—Ç—Ä–∏–∂–∫–∏" –≤–º–µ—Å—Ç–æ "–º—É–∂—Å–∫–ò–µ —Å—Ç—Ä–∏–∂–∫–∏"

**–†–µ—à–µ–Ω–∏–µ:** Regex –¥–æ–ª–∂–µ–Ω –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—Ç—å –≤—Å—ë –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω–æ–µ, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ

```javascript
// –î–æ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
.replace(/—É—é\s+([–∞-—è—ë]+)—É$/iu, '—ã–µ $1–∏')  // –º—É–∂—Å–∫—É—é —Å—Ç—Ä–∏–∂–∫—É -> –º—É–∂—Å–∫–´–µ —Å—Ç—Ä–∏–∂–∫–∏ ‚ùå

// –ü–æ—Å–ª–µ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
.replace(/([–∞-—è—ë]+)—É—é\s+([–∞-—è—ë]+)—É$/iu, '$1–∏–µ $2–∏')  // –º—É–∂—Å–∫—É—é —Å—Ç—Ä–∏–∂–∫—É -> –º—É–∂—Å–∫–ò–µ —Å—Ç—Ä–∏–∂–∫–∏ ‚úÖ
```

### 4. –°–∫–ª–æ–Ω–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –±–µ–∑ –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã—Ö (commit `5de395b`)

**–ü—Ä–æ–±–ª–µ–º–∞:** "3 –ø–µ–¥–∏–∫—é—Ä—ã", "2 –º–∞–Ω–∏–∫—é—Ä", "2 –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ—Ä–æ–¥—ã"

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö + —Ä–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂ –ø–æ—Å–ª–µ —á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö

```javascript
// –í–∏–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂ (–Ω–∞ —á—Ç–æ?)
.replace(/([–∞-—è—ë]+)–Ω–∏–µ$/iu, '$1–Ω–∏—è')  // –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ -> –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è
.replace(/([–∞-—è—ë]+)—é—Ä$/iu, '$1—é—Ä–∞')   // –º–∞–Ω–∏–∫—é—Ä -> –º–∞–Ω–∏–∫—é—Ä–∞, –ø–µ–¥–∏–∫—é—Ä -> –ø–µ–¥–∏–∫—é—Ä–∞
.replace(/([–∞-—è—ë]+)–∞–∂$/iu, '$1–∞–∂–∞')   // –º–∞—Å—Å–∞–∂ -> –º–∞—Å—Å–∞–∂–∞

// –ò–º–µ–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂ - –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–æ—Å–ª–µ —á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö 2-4
.replace(/([–∞-—è—ë]+)—é—Ä$/iu, '$1—é—Ä–∞')   // "—É –≤–∞—Å 2 –º–∞–Ω–∏–∫—é—Ä–∞" (–Ω–µ "–º–∞–Ω–∏–∫—é—Ä—ã")
```

**–í–∞–∂–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞:**
- –ü–æ—Å–ª–µ 2, 3, 4 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **—Ä–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —á–∏—Å–ª–∞**: "2 —Å—Ç–æ–ª–∞", "3 –º–∞–Ω–∏–∫—é—Ä–∞"
- –ü–æ—Å–ª–µ 5+ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **—Ä–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —á–∏—Å–ª–∞**: "5 —Å—Ç–æ–ª–æ–≤", "6 –º–∞–Ω–∏–∫—é—Ä–æ–≤"

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç: `tests/reminder-templates-test.js`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 50 —Å–ª—É—á–∞–π–Ω—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
- –†–∞–∑–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —É—Å–ª—É–≥ (1-3 —É—Å–ª—É–≥–∏, —Å –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è–º–∏ –∏ –±–µ–∑)
- 7 —Ç–∏–ø–æ–≤ —É—Å–ª—É–≥ —Å –ø–æ–ª–Ω—ã–º–∏ —Å–∫–ª–æ–Ω–µ–Ω–∏—è–º–∏
- –í—Å–µ –ø–∞–¥–µ–∂–∏ –∏ —à–∞–±–ª–æ–Ω—ã –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π

**–ó–∞–ø—É—Å–∫:**
```bash
node tests/reminder-templates-test.js
```

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**
- ‚úÖ 1 —É—Å–ª—É–≥–∞: "–º—É–∂—Å–∫—É—é —Å—Ç—Ä–∏–∂–∫—É"
- ‚úÖ 2 –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ: "2 –º—É–∂—Å–∫–∏–µ —Å—Ç—Ä–∏–∂–∫–∏"
- ‚úÖ 3 –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ: "3 –¥–µ—Ç—Å–∫–∏–µ —Å—Ç—Ä–∏–∂–∫–∏"
- ‚úÖ 2 —Ä–∞–∑–Ω—ã–µ: "–º—É–∂—Å–∫—É—é —Å—Ç—Ä–∏–∂–∫—É –∏ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ—Ä–æ–¥—ã"
- ‚úÖ 2 –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ + 1 –¥—Ä—É–≥–∞—è: "2 –º–∞–Ω–∏–∫—é—Ä–∞ –∏ –ø–µ–¥–∏–∫—é—Ä"
- ‚úÖ –°—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ: "2 –º–∞–Ω–∏–∫—é—Ä–∞", "3 –ø–µ–¥–∏–∫—é—Ä–∞", "2 –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –±–æ—Ä–æ–¥—ã"

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
‚ùå "–º—É–∂—Å–∫—É—é —Å—Ç—Ä–∏–∂–∫—É –∏ –º—É–∂—Å–∫—É—é —Å—Ç—Ä–∏–∂–∫—É"
‚ùå "2 –º—É–∂—Å–∫–´–µ —Å—Ç—Ä–∏–∂–∫–∏"
‚ùå "3 –ø–µ–¥–∏–∫—é—Ä—ã"
‚ùå "2 –º–∞–Ω–∏–∫—é—Ä"
‚ùå "3 –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ—Ä–æ–¥—ã"
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
‚úÖ "2 –º—É–∂—Å–∫–∏–µ —Å—Ç—Ä–∏–∂–∫–∏"
‚úÖ "3 –¥–µ—Ç—Å–∫–∏–µ —Å—Ç—Ä–∏–∂–∫–∏"
‚úÖ "2 –º–∞–Ω–∏–∫—é—Ä–∞"
‚úÖ "3 –ø–µ–¥–∏–∫—é—Ä–∞"
‚úÖ "2 –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –±–æ—Ä–æ–¥—ã"
‚úÖ "–º—É–∂—Å–∫—É—é —Å—Ç—Ä–∏–∂–∫—É –∏ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ—Ä–æ–¥—ã"
```

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **src/sync/bookings-sync.js** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ `amount` –∏–∑ YClients API
2. **src/sync/client-records-sync.js** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ `amount` –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏
3. **src/services/reminder/templates.js** - –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∏ —Å–∫–ª–æ–Ω–µ–Ω–∏–µ —É—Å–ª—É–≥
4. **tests/reminder-templates-test.js** - —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç (–Ω–æ–≤—ã–π —Ñ–∞–π–ª)

## üöÄ –î–µ–ø–ª–æ–π

```bash
# –ö–æ–º–º–∏—Ç—ã
93b6397 - fix: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ amount > 1 –¥–ª—è —É—Å–ª—É–≥ –≤ –∑–∞–ø–∏—Å—è—Ö
fc17e78 - feat: —É–ª—É—á—à–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—Å–ª—É–≥ –≤ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è—Ö
8028e28 - fix: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –æ–∫–æ–Ω—á–∞–Ω–∏–µ –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã—Ö –≤–æ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —á–∏—Å–ª–µ
5de395b - fix: –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å–∫–ª–æ–Ω–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –±–µ–∑ –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã—Ö

# –î–µ–ø–ª–æ–π
git push origin feature/redis-context-cache
ssh root@46.149.70.219 "cd /opt/ai-admin && git pull && pm2 restart all"
```

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–¥–µ–ø–ª–æ–µ–Ω–æ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω 31.10.2025

## üí° –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

**YClients API –æ—Ç–≤–µ—Ç:**
```json
{
  "id": 1381715187,
  "services": [
    {
      "id": 18356010,
      "title": "–ú–£–ñ–°–ö–ê–Ø –°–¢–†–ò–ñ–ö–ê",
      "cost": 4000,
      "amount": 2
    }
  ]
}
```

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–ø–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏):**
```json
{
  "yclients_record_id": 1381715187,
  "services": ["–ú–£–ñ–°–ö–ê–Ø –°–¢–†–ò–ñ–ö–ê", "–ú–£–ñ–°–ö–ê–Ø –°–¢–†–ò–ñ–ö–ê"],
  "service_ids": [18356010, 18356010],
  "cost": 8000
}
```

**–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ:**
```
–î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä, –ê—Ä—Å–µ–Ω! –ù–∞–ø–æ–º–∏–Ω–∞–µ–º –æ –∑–∞–ø–∏—Å–∏ –Ω–∞ 2 –º—É–∂—Å–∫–∏–µ —Å—Ç—Ä–∏–∂–∫–∏ –∑–∞–≤—Ç—Ä–∞ –≤ 12:30 ‚ú®
```

### Regex –ø–∞—Ç—Ç–µ—Ä–Ω—ã

**–î–ª—è –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω–æ–µ + —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ:**
```javascript
// –í–∏–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂
/([–∞-—è—ë]+)—É—é\s+([–∞-—è—ë]+)—É$/iu  // –º—É–∂—Å–∫—É—é —Å—Ç—Ä–∏–∂–∫—É -> $1–∏–µ $2–∏
// –†–µ–∑—É–ª—å—Ç–∞—Ç: –º—É–∂—Å–∫–∏–µ —Å—Ç—Ä–∏–∂–∫–∏
```

**–î–ª—è —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –±–µ–∑ –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã—Ö:**
```javascript
// –û–∫–æ–Ω—á–∞–Ω–∏–µ –Ω–∞ -—é—Ä
/([–∞-—è—ë]+)—é—Ä$/iu  // –º–∞–Ω–∏–∫—é—Ä -> $1—é—Ä–∞
// –†–µ–∑—É–ª—å—Ç–∞—Ç: –º–∞–Ω–∏–∫—é—Ä–∞

// –û–∫–æ–Ω—á–∞–Ω–∏–µ –Ω–∞ -–Ω–∏–µ
/([–∞-—è—ë]+)–Ω–∏–µ$/iu  // –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ -> $1–Ω–∏—è
// –†–µ–∑—É–ª—å—Ç–∞—Ç: –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è
```

## üéØ –ö–µ–π—Å—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ö–µ–π—Å 1: –ú–∞–º–∞ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –¥–≤—É—Ö –¥–µ—Ç–µ–π

**–°–∏—Ç—É–∞—Ü–∏—è:** –û–ª—å–≥–∞ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –ë–æ–≥–¥–∞–Ω–∞ –∏ –µ—â–µ –æ–¥–Ω–æ–≥–æ —Ä–µ–±–µ–Ω–∫–∞ –Ω–∞ —Å—Ç—Ä–∏–∂–∫—É –≤ 18:30

**YClients:** –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å —Å amount=2 –∏–ª–∏ –¥–≤–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∑–∞–ø–∏—Å–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, –ë–æ–≥–¥–∞–Ω! –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ–º 2 –º—É–∂—Å–∫–∏–µ —Å—Ç—Ä–∏–∂–∫–∏ –Ω–∞ –∑–∞–≤—Ç—Ä–∞ –≤ 18:30 ‚úÖ

–ú–∞—Å—Ç–µ—Ä: –ë–∞—Ä–∏
–°—Ç–æ–∏–º–æ—Å—Ç—å: 4000 —Ä—É–±.

–ñ–¥—ë–º –≤–∞—Å –ø–æ –∞–¥—Ä–µ—Å—É: –ú–∞–ª–∞—Ö–æ–≤–∫–∞, –Æ–∂–Ω–∞—è —É–ª–∏—Ü–∞, 1
```

### –ö–µ–π—Å 2: –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —É—Å–ª—É–≥–∞

**–°–∏—Ç—É–∞—Ü–∏—è:** –ö–ª–∏–µ–Ω—Ç –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –º–∞–Ω–∏–∫—é—Ä –∏ –ø–µ–¥–∏–∫—é—Ä

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é! –ó–∞–≤—Ç—Ä–∞ –≤ 14:00 –∂–¥—ë–º –≤–∞—Å –Ω–∞ –º–∞–Ω–∏–∫—é—Ä –∏ –ø–µ–¥–∏–∫—é—Ä üåü
```

### –ö–µ–π—Å 3: –ì—Ä—É–ø–ø–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤

**–°–∏—Ç—É–∞—Ü–∏—è:** 3 —á–µ–ª–æ–≤–µ–∫–∞ –Ω–∞ –ø–µ–¥–∏–∫—é—Ä

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
–î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä! –ù–∞–ø–æ–º–∏–Ω–∞–µ–º –æ –∑–∞–ø–∏—Å–∏ –Ω–∞ 3 –ø–µ–¥–∏–∫—é—Ä–∞ –∑–∞–≤—Ç—Ä–∞ –≤ 16:00 üìÖ
```

## üîß –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤—ã—Ö —É—Å–ª—É–≥

–ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö:

1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –æ–∫–æ–Ω—á–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `-—Ü–∏—è` –¥–ª—è "–¥–µ–ø–∏–ª—è—Ü–∏—è")
2. –î–æ–±–∞–≤—å—Ç–µ regex –ø—Ä–∞–≤–∏–ª–æ –≤ –∫–∞–∂–¥—ã–π –ø–∞–¥–µ–∂ –≤ `formatServicesInCase()`

**–ü—Ä–∏–º–µ—Ä:**
```javascript
// –î–ª—è —É—Å–ª—É–≥ –Ω–∞ -—Ü–∏—è (–¥–µ–ø–∏–ª—è—Ü–∏—è, —ç–ø–∏–ª—è—Ü–∏—è)
.replace(/([–∞-—è—ë]+)—Ü–∏—é$/iu, '$1—Ü–∏–∏')  // –¥–µ–ø–∏–ª—è—Ü–∏—é -> –¥–µ–ø–∏–ª—è—Ü–∏–∏
```

## üìù –ó–∞–º–µ—Ç–∫–∏

1. **–ù–µ –≤—Å–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–æ–∫—Ä—ã—Ç—ã** - –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ —Å–∞–º—ã–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–µ (—é—Ä, –Ω–∏–µ, –∞–∂)
2. **–ú–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å** - –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É —á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö 5+ (—Ä–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –º–Ω.—á.)
3. **Locale-–∑–∞–≤–∏—Å–∏–º–æ** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
4. **Fallback –Ω–∞ declensions.plural** - –µ—Å–ª–∏ –≤ –±–∞–∑–µ –µ—Å—Ç—å –≥–æ—Ç–æ–≤—ã–µ —Å–∫–ª–æ–Ω–µ–Ω–∏—è, –æ–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

- [x] YClients API –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç `amount`
- [x] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥—É–±–ª–∏—Ä—É–µ—Ç —É—Å–ª—É–≥–∏ –ø—Ä–∏ amount > 1
- [x] –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —É—Å–ª—É–≥ –≤ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è—Ö
- [x] –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã—Ö (–∏–µ, –∞ –Ω–µ —ã–µ)
- [x] –°–∫–ª–æ–Ω–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –±–µ–∑ –ø—Ä–∏–ª–∞–≥–∞—Ç–µ–ª—å–Ω—ã—Ö
- [x] –†–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–∞–¥–µ–∂ –ø–æ—Å–ª–µ —á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö 2-4
- [x] –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–Ω –∏ –∑–∞–ø—É—â–µ–Ω
- [x] –í—Å–µ 50 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- [x] –ó–∞–¥–µ–ø–ª–æ–µ–Ω–æ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [TROUBLESHOOTING.md](../TROUBLESHOOTING.md) - –æ–±—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
- [–¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç](../../tests/reminder-templates-test.js) - —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
- [Reminder templates](../../src/services/reminder/templates.js) - –∫–æ–¥ —à–∞–±–ª–æ–Ω–æ–≤

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

–°–ø–∞—Å–∏–±–æ –û–ª—å–≥–µ –∑–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–ø–∏—Å—å—é –Ω–∞ –¥–≤–æ–∏—Ö –¥–µ—Ç–µ–π! üë®‚Äçüë¶‚Äçüë¶
