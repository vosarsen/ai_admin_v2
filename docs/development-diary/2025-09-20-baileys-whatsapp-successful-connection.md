# Baileys WhatsApp - –£—Å–ø–µ—à–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

**–î–∞—Ç–∞**: 20 —Å–µ–Ω—Ç—è–±—Ä—è 2025
**–ê–≤—Ç–æ—Ä**: AI Admin Team
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –£—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ production

## üìã –ö–æ–Ω—Ç–µ–∫—Å—Ç

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –±—ã–ª–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ WhatsApp —á–µ—Ä–µ–∑ Baileys –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ 962302 (KULLTURA –ú–∞–ª–∞—Ö–æ–≤–∫–∞). –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. QR –∫–æ–¥ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤ –ª–æ–≥–∞—Ö
2. –°–µ—Å—Å–∏—è —Å—Ä–∞–∑—É –ª–æ–≥–∞—É—Ç–∏–ª–∞—Å—å –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è
3. –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

## üéØ –¶–µ–ª—å

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ WhatsApp –∫ –±–æ—Ç—É AI Admin —á–µ—Ä–µ–∑ Baileys v7.0.0 –Ω–∞ production —Å–µ—Ä–≤–µ—Ä–µ.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### –£–ø—Ä–æ—â–µ–Ω–∏–µ –¥–æ –æ–¥–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ —Å–µ—Å—Å–∏–π
- **–£–¥–∞–ª—ë–Ω**: `baileys-manager.js` (–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω –≤ `archive/old-whatsapp/`)
- **–û—Å—Ç–∞–≤–ª–µ–Ω**: `session-pool.js` - –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:
  - Circuit breaker pattern
  - Health checks
  - –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  - Mutex –∑–∞—â–∏—Ç–∞ –æ—Ç –≥–æ–Ω–∫–∏

#### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–ª—è Baileys v7.0.0
```javascript
// –£–±—Ä–∞–ª–∏ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤ v7 –∏–º–ø–æ—Ä—Ç—ã
const {
    makeWASocket,
    DisconnectReason,
    useMultiFileAuthState,
    fetchLatestBaileysVersion,
    makeCacheableSignalKeyStore,
    Browsers,
    delay
    // proto - —É–±—Ä–∞–Ω
    // makeInMemoryStore - –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ v7
} = require('@whiskeysockets/baileys');

// –£–ø—Ä–æ—â–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è getMessage
getMessage: async () => undefined
```

### 2. –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å QR –∫–æ–¥–æ–º

#### –î–æ–±–∞–≤–ª–µ–Ω –ø–æ–ª–Ω—ã–π –≤—ã–≤–æ–¥ QR –≤ ASCII
```javascript
const qrcodeTerminal = require('qrcode-terminal');

pool.on('qr', async ({ companyId: cId, qr }) => {
    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ QR –≤ —Ñ–∞–π–ª
    const qrPath = path.join(process.cwd(), `qr_${companyId}.txt`);
    await fs.writeFile(qrPath, qr, 'utf8');

    // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ QR –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≤ –≤–∏–¥–µ ASCII
    qrcodeTerminal.generate(qr, { small: true });
});
```

### 3. –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –±—ã—Å—Ç—Ä—ã–º logout

#### –ü—Ä–∏—á–∏–Ω–∞
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –ø—ã—Ç–∞–ª–∏—Å—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–Ω—É —Å–µ—Å—Å–∏—é
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç —Å–µ—Å—Å–∏–π –º–µ–∂–¥—É –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ —Ç–µ—Å—Ç–∞–º–∏ –∏ production

#### –†–µ—à–µ–Ω–∏–µ
```bash
# 1. –ù–∞–π—Ç–∏ –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
ps aux | grep -E '(baileys|962302)'

# 2. –£–±–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –ø—Ä–æ—Ü–µ—Å—Å—ã
kill <PID1> <PID2> ...

# 3. –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ —Å–µ—Å—Å–∏–∏
rm -rf baileys_sessions/company_962302

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —á–∏—Å—Ç–æ
pm2 restart baileys-whatsapp
```

### 4. –§–∏–Ω–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

#### ecosystem.baileys.config.js
```javascript
{
    name: 'baileys-whatsapp',
    script: 'scripts/baileys-service.js',
    instances: 1,
    exec_mode: 'fork',
    env: {
        NODE_ENV: 'production',
        COMPANY_ID: '962302'
    }
}
```

#### scripts/baileys-service.js
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è QR –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- Health checks –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫—É–Ω–¥
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–∑—Ä—ã–≤–µ
- Forwarding —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–∞ webhook –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –£—Å–ø–µ—à–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
```
‚úÖ WHATSAPP CONNECTED SUCCESSFULLY!
Phone: 79936363848:37
Name: KULLTURA –ú–∞–ª–∞—Ö–æ–≤–∫–∞
Ready to send and receive messages
```

### –ú–µ—Ç—Ä–∏–∫–∏
- –í—Ä–µ–º—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: ~2 —Å–µ–∫—É–Ω–¥—ã –ø–æ—Å–ª–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è QR
- –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å: –°–µ—Å—Å–∏—è –æ—Å—Ç–∞—ë—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–æ–π
- Restart count: 0 (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π)

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –í–µ—Ä—Å–∏–∏
- Baileys: 7.0.0-rc.3
- Node.js: 20.19.5
- PM2: –ø–æ—Å–ª–µ–¥–Ω—è—è –≤–µ—Ä—Å–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤
```
src/integrations/whatsapp/
‚îú‚îÄ‚îÄ session-pool.js          # –û—Å–Ω–æ–≤–Ω–æ–π –º–µ–Ω–µ–¥–∂–µ—Ä —Å–µ—Å—Å–∏–π
‚îî‚îÄ‚îÄ whatsapp-manager-unified.js  # –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä

scripts/
‚îú‚îÄ‚îÄ baileys-service.js       # PM2 —Å–µ—Ä–≤–∏—Å –¥–ª—è Baileys
‚îî‚îÄ‚îÄ ...

archive/old-whatsapp/
‚îî‚îÄ‚îÄ baileys-manager-archived-20250920.js  # –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å—Ç–∞—Ä—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä
```

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```bash
ssh -i ~/.ssh/id_ed25519_ai_admin root@46.149.70.219 "pm2 logs baileys-whatsapp --lines 50"
```

#### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
```bash
ssh -i ~/.ssh/id_ed25519_ai_admin root@46.149.70.219 "pm2 restart baileys-whatsapp"
```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ QR –∫–æ–¥–∞
```bash
# –í–∞—Ä–∏–∞–Ω—Ç 1: –ò–∑ –ª–æ–≥–æ–≤ —Å ASCII –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
ssh -i ~/.ssh/id_ed25519_ai_admin root@46.149.70.219 "pm2 logs baileys-whatsapp --lines 40"

# –í–∞—Ä–∏–∞–Ω—Ç 2: –ò–∑ —Ñ–∞–π–ª–∞ (–ø–æ–ª–Ω–∞—è —Å—Ç—Ä–æ–∫–∞)
ssh -i ~/.ssh/id_ed25519_ai_admin root@46.149.70.219 "cat /opt/ai-admin/qr_962302.txt"
```

## üìù –í–∞–∂–Ω—ã–µ —É—Ä–æ–∫–∏

1. **–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –ø—Ä–æ—Ü–µ—Å—Å—ã** - –æ–Ω–∏ –º–æ–≥—É—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å –∑–∞ —Å–µ—Å—Å–∏—é
2. **QR –∫–æ–¥—ã –∏–º–µ—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏** - –æ–∫–æ–ª–æ 60 —Å–µ–∫—É–Ω–¥
3. **Baileys v7 –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç v6** - –Ω–µ—Ç Store, —É–ø—Ä–æ—â—ë–Ω–Ω—ã–π getMessage
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ circuit breaker** - –∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç—ã—Ö –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
5. **–õ–æ–≥–∏ PM2 –æ–±—Ä–µ–∑–∞—é—Ç –¥–ª–∏–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏** - —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ QR –≤ —Ñ–∞–π–ª

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –°–æ–∑–¥–∞—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º
2. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É pairing code (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ QR)
3. ‚è≥ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å backup/restore —Å–µ—Å—Å–∏–π
4. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –º–µ–¥–∏–∞-—Å–æ–æ–±—â–µ–Ω–∏–π
5. ‚è≥ –°–æ–∑–¥–∞—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ dashboard

## üìö –°—Å—ã–ª–∫–∏

- [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π Baileys](https://github.com/WhiskeySockets/Baileys)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Baileys](https://baileys.wiki)
- [PM2 –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://pm2.keymetrics.io/)

---

*–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è WhatsApp –∫ production –±–æ—Ç—É AI Admin*