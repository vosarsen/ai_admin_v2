# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –º–∞—Å—Ç–µ—Ä–∞–º–∏ - 5 –∞–≤–≥—É—Å—Ç–∞ 2025

## –ö–æ–Ω—Ç–µ–∫—Å—Ç
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª –æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å AI –±–æ—Ç–æ–º:
1. –ë–æ—Ç –∑–¥–æ—Ä–æ–≤–∞–µ—Ç—Å—è –≤ –∫–∞–∂–¥–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏
2. –¢–µ—Ä—è–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–∏–∞–ª–æ–≥–∞ (–∑–∞–±—ã–≤–∞–µ—Ç —á—Ç–æ –∫–ª–∏–µ–Ω—Ç —Å–∫–∞–∑–∞–ª "–Ω–∞ —Å—Ç—Ä–∏–∂–∫—É")
3. –ü–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –º–∞—Å—Ç–µ—Ä "–ò–≤–∞–Ω"
4. –ë–æ—Ç –≥–æ–≤–æ—Ä–∏—Ç –æ –º–∞—Å—Ç–µ—Ä–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç —Å–µ–≥–æ–¥–Ω—è (–†–∞–º–∑–∞–Ω –∏ –ë–∞—Ä–∏)

## –ü—Ä–æ–±–ª–µ–º—ã

### 1. –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è
- **–ü—Ä–∏—á–∏–Ω–∞**: –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª–∞—Å—å –∏–∑ Redis
- **–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ conversation –∏–∑ Redis –≤–º–µ—Å—Ç–æ Supabase –≤ `cached-data-loader.js`

### 2. –ü–æ—Ç–µ—Ä—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–∏–∞–ª–æ–≥–∞
- **–ü—Ä–∏—á–∏–Ω–∞**: –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª—Å—è –≤ –ø—Ä–æ–º–ø—Ç
- **–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ `intermediateContext` –≤ `index.js:258`

### 3. –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –º–∞—Å—Ç–µ—Ä –ò–≤–∞–Ω
- **–ü—Ä–∏—á–∏–Ω–∞**: AI –≥–∞–ª–ª—é—Ü–∏–Ω–∏—Ä–æ–≤–∞–ª –∏–º–µ–Ω–∞
- **–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω—ã —Å—Ç—Ä–æ–≥–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –≤ –ø—Ä–æ–º–ø—Ç—ã –ø—Ä–æ—Ç–∏–≤ –≤—ã–¥—É–º—ã–≤–∞–Ω–∏—è –º–∞—Å—Ç–µ—Ä–æ–≤

### 4. –£–ø–æ–º–∏–Ω–∞–Ω–∏–µ –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –º–∞—Å—Ç–µ—Ä–æ–≤
- **–ü—Ä–∏—á–∏–Ω–∞**: AI –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–ª –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö —Å–µ–≥–æ–¥–Ω—è –º–∞—Å—Ç–µ—Ä–∞—Ö
- **–†–µ—à–µ–Ω–∏–µ**: –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω –ø—Ä–æ–º–ø—Ç –¥–ª—è –±–æ–ª–µ–µ —è–≤–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –º–∞—Å—Ç–µ—Ä–æ–≤

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞ (optimized-prompt.js)
```javascript
// –ë—ã–ª–æ:
–í–°–ï –ú–ê–°–¢–ï–†–ê –°–ê–õ–û–ù–ê (–∏—Å–ø–æ–ª—å–∑—É–π –¢–û–õ–¨–ö–û —ç—Ç–∏ –∏–º–µ–Ω–∞):
${staff.map(s => `- ${s.name} (${s.rating ? `—Ä–µ–π—Ç–∏–Ω–≥ ${s.rating}` : '–Ω–æ–≤—ã–π –º–∞—Å—Ç–µ—Ä'})`).join('\n')}

–†–∞–±–æ—Ç–∞—é—Ç –°–ï–ì–û–î–ù–Ø: ${workingToday.length > 0 ? workingToday.map(s => s.name).join(', ') : '–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è'}

// –°—Ç–∞–ª–æ:
üî¥ –ú–ê–°–¢–ï–†–ê –ö–û–¢–û–†–´–ï –†–ê–ë–û–¢–ê–Æ–¢ –°–ï–ì–û–î–ù–Ø (–£–ü–û–ú–ò–ù–ê–ô –¢–û–õ–¨–ö–û –ò–•):
${workingToday.length > 0 ? workingToday.map(s => `- ${s.name}`).join('\n') : '- –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è'}

–í–°–ï –ú–ê–°–¢–ï–†–ê –°–ê–õ–û–ù–ê (–¥–ª—è —Å–ø—Ä–∞–≤–∫–∏):
${staff.map(s => `- ${s.name} (${s.rating ? `—Ä–µ–π—Ç–∏–Ω–≥ ${s.rating}` : '–Ω–æ–≤—ã–π –º–∞—Å—Ç–µ—Ä'})`).join('\n')}

üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –Ω–µ —É–∫–∞–∑–∞–ª –¥–µ–Ω—å - –≥–æ–≤–æ—Ä–∏ –¢–û–õ–¨–ö–û –æ —Ç–µ—Ö, –∫—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –°–ï–ì–û–î–ù–Ø!
```

### 2. –ü–µ—Ä–µ–¥–∞—á–∞ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (index.js)
```javascript
const promptContext = {
  // ... –¥—Ä—É–≥–∏–µ –ø–æ–ª—è
  // –í–ê–ñ–ù–û: –ø–µ—Ä–µ–¥–∞–µ–º –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –ø—Ä–æ–º–ø—Ç–æ–≤
  intermediateContext: context.intermediateContext || null
};
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞
```bash
# –í .env –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
AI_PROMPT_VERSION=optimized-prompt
```

### 4. –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ—Ç–∏–≤ –≤—ã–¥—É–º—ã–≤–∞–Ω–∏—è
```javascript
6Ô∏è‚É£ –ù–ï –í–´–î–£–ú–´–í–ê–ô –ú–ê–°–¢–ï–†–û–í
   –ì–æ–≤–æ—Ä–∏ –¢–û–õ–¨–ö–û –æ —Ç–µ—Ö –º–∞—Å—Ç–µ—Ä–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å –≤ —Å–ø–∏—Å–∫–µ –Ω–∏–∂–µ!
   –ó–ê–ü–†–ï–©–ï–ù–û —É–ø–æ–º–∏–Ω–∞—Ç—å –ª—é–±—ã—Ö –¥—Ä—É–≥–∏—Ö –º–∞—Å—Ç–µ—Ä–æ–≤!
   –ú–∞—Å—Ç–µ—Ä "–ò–≤–∞–Ω" –ù–ï –°–£–©–ï–°–¢–í–£–ï–¢ - –Ω–µ —É–ø–æ–º–∏–Ω–∞–π –µ–≥–æ!
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- –ë–æ—Ç: "–ù–∞ –∫–∞–∫–æ–π –¥–µ–Ω—å –≤–∞—Å –∑–∞–ø–∏—Å–∞—Ç—å? –£ –Ω–∞—Å —Ä–∞–±–æ—Ç–∞—é—Ç –†–∞–º–∑–∞–Ω, –°–µ—Ä–≥–µ–π –∏ –ë–∞—Ä–∏"
- –ü—Ä–æ–±–ª–µ–º–∞: –£–ø–æ–º–∏–Ω–∞–µ—Ç –≤—Å–µ—Ö –º–∞—Å—Ç–µ—Ä–æ–≤, —Ö–æ—Ç—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –°–µ—Ä–≥–µ–π

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- –ë–æ—Ç: "–ù–∞ —Å—Ç—Ä–∏–∂–∫—É —Å–µ–≥–æ–¥–Ω—è —Ä–∞–±–æ—Ç–∞–µ—Ç –°–µ—Ä–≥–µ–π. –ï—Å—Ç—å –≤—Ä–µ–º—è –≤ 14:00 –∏–ª–∏ 17:00."
- ‚úÖ –£–ø–æ–º–∏–Ω–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –º–∞—Å—Ç–µ—Ä–∞
- ‚úÖ –ù–µ –≤—ã–¥—É–º—ã–≤–∞–µ—Ç –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –º–∞—Å—Ç–µ—Ä–æ–≤
- ‚úÖ –ü–æ–º–Ω–∏—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç (—É—Å–ª—É–≥—É "—Å—Ç—Ä–∏–∂–∫–∞")

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –≤ –ª–æ–≥–∞—Ö

–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:
1. `workingToday: [ '–°–µ—Ä–≥–µ–π' ]` - —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö
2. `No intermediate context found` - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–≥–¥–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
3. `Business type detected: barbershop` - –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –±–∏–∑–Ω–µ—Å–∞

## –£—Ä–æ–∫–∏

1. **–Ø–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤–∞–∂–Ω–µ–µ –Ω–µ—è–≤–Ω—ã—Ö** - –ü—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, –Ω—É–∂–Ω–æ —è–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å "—É–ø–æ–º–∏–Ω–∞–π –¢–û–õ–¨–ö–û –∏—Ö"
2. **–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –∫—Ä–∏—Ç–∏—á–µ–Ω** - –ë–µ–∑ –Ω–µ–≥–æ AI –∑–∞–±—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª–∏ –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** - –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–º–ø—Ç–∞—Ö –Ω—É–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–¥ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
4. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** - –í–∞–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–∞–∫–æ–π –ø—Ä–æ–º–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ AI_PROMPT_VERSION

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –±—É–¥—É—â–µ–µ

1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `optimized-prompt` –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π, —Ç–∞–∫ –∫–∞–∫ –æ–Ω –±–æ–ª–µ–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω
2. –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø—Ä–æ–º–ø—Ç–æ–≤ –æ–±–Ω–æ–≤–ª—è—Ç—å –≤—Å–µ –≤–µ—Ä—Å–∏–∏ (optimized, detailed, base)
3. –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –≤–µ—Ä—Å–∏–∏ –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
4. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–º–ø—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–æ–¥–µ–ª–∏ AI