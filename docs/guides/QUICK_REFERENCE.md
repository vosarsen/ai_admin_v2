# AI Admin v2 - –ö—Ä–∞—Ç–∫–∏–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
# 1. –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞
./start-work.sh

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å Redis —Ç—É–Ω–Ω–µ–ª—å (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è MCP)
./scripts/maintain-redis-tunnel.sh start

# 3. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
node test-webhook.js "—Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è"

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh ai-admin-server "pm2 logs ai-admin-worker-v2 --lines 50"
```

## üìã –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏ –¥–µ–ø–ª–æ–π
```bash
# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –º–∞—Å—Ç–µ—Ä–æ–≤
node scripts/sync-staff-schedules.js

# –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä
git add -A && git commit -m "–æ–ø–∏—Å–∞–Ω–∏–µ" && git push
ssh ai-admin-server "cd /opt/ai-admin && git pull && pm2 restart ai-admin-worker-v2"
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ MCP
```bash
# –í Claude Code –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—ã:
@whatsapp send_message phone:79001234567 message:"—Ç–µ–∫—Å—Ç"
@redis clear_context phone:79001234567
@logs logs_tail lines:50
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- `YCLIENTS_COMPANY_ID` - ID –∫–æ–º–ø–∞–Ω–∏–∏ –≤ YClients (962302)
- `REDIS_URL` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Redis
- `SUPABASE_URL` –∏ `SUPABASE_KEY` - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- `DEEPSEEK_API_KEY` - AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä

### –í–∞–∂–Ω—ã–µ –ø—É—Ç–∏
- –õ–æ–∫–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç: `/Users/vosarsen/Documents/GitHub/ai_admin_v2`
- –°–µ—Ä–≤–µ—Ä: `root@46.149.70.219:/opt/ai-admin`
- SSH –∫–ª—é—á: `~/.ssh/id_ed25519_ai_admin`

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã
```bash
# Health check API
curl http://46.149.70.219:3000/health | jq .

# –°—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
curl http://46.149.70.219:3000/api/sync/status | jq .

# PM2 —Å—Ç–∞—Ç—É—Å
ssh ai-admin-server "pm2 status"
```

### –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞
```bash
# –ñ–∏–≤—ã–µ –ª–æ–≥–∏
ssh ai-admin-server "pm2 logs ai-admin-worker-v2 --lines 100"

# –ü–æ–∏—Å–∫ –≤ –ª–æ–≥–∞—Ö
ssh ai-admin-server "grep 'pattern' /root/.pm2/logs/ai-admin-worker-v2-out.log"

# –û—à–∏–±–∫–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –º–∏–Ω—É—Ç
node scripts/check-errors.js --minutes 30
```

## üéØ –ß–∞—Å—Ç—ã–µ –∑–∞–¥–∞—á–∏

### 1. –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–æ–º–∞–Ω–¥—É AI
1. –û–±–Ω–æ–≤–∏—Ç—å prompt –≤ `src/services/ai-admin-v2/index.js`
2. –î–æ–±–∞–≤–∏—Ç—å regex –≤ `extractCommands()`
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤ `executeCommands()`

### 2. –ò–∑–º–µ–Ω–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å `src/sync/sync-manager.js`:
```javascript
// –ù–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫—É
if (minute === 0 || minute === 30) {
// –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞ –Ω—É–∂–Ω—ã–π –∏–Ω—Ç–µ—Ä–≤–∞–ª
```

### 3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é —Å–ª–æ—Ç–æ–≤
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å `src/services/ai-admin-v2/modules/formatter.js`:
```javascript
const minGap = 1.0; // –ò–∑–º–µ–Ω–∏—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫
const maxCount = 3; // –ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ—Ç–æ–≤ –Ω–∞ –ø–µ—Ä–∏–æ–¥
```

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### Redis —Ç—É–Ω–Ω–µ–ª—å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
./scripts/maintain-redis-tunnel.sh status

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
./scripts/maintain-redis-tunnel.sh stop
./scripts/maintain-redis-tunnel.sh start
```

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `ssh ai-admin-server "pm2 logs ai-admin-worker-v2 --lines 100"`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Venom-bot: `ssh ai-admin-server "pm2 logs venom-bot"`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å: `ssh ai-admin-server "pm2 restart all"`

### –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
```bash
# –†—É—á–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
curl -X POST http://46.149.70.219:3000/api/sync/schedules \
  -H "Authorization: Bearer YOUR_API_KEY"
```

## üìù –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

- [ ] –ö–æ–¥ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –ª–æ–∫–∞–ª—å–Ω–æ
- [ ] –õ–æ–≥–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- [ ] README/–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- [ ] –ù–µ—Ç —Ö–∞—Ä–¥–∫–æ–¥–∞ (–≤—Å–µ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é)
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—à–∏–±–æ–∫

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](../README.md)
- [–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π](../updates/)
- [Troubleshooting](../TROUBLESHOOTING.md)
- [YClients API](../../YCLIENTS_API.md)

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 21 –∏—é–ª—è 2024*