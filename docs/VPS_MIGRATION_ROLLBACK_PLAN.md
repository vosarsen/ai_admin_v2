# üîô VPS Migration Rollback Plan

**–î–æ–∫—É–º–µ–Ω—Ç:** –ü–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ VPS –ú–°–ö ‚Üí –°–ü–ë
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-10-31
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô

---

## üéØ –¶–µ–ª—å –¥–æ–∫—É–º–µ–Ω—Ç–∞

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∫–∞–∫ **–±—ã—Å—Ç—Ä–æ –æ—Ç–∫–∞—Ç–∏—Ç—å** –º–∏–≥—Ä–∞—Ü–∏—é VPS –≤ —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º –Ω–∞ –ª—é–±–æ–º —ç—Ç–∞–ø–µ.

**–ö–ª—é—á–µ–≤–æ–π –ø—Ä–∏–Ω—Ü–∏–ø:** –ú–æ—Å–∫–æ–≤—Å–∫–∏–π VPS **–ù–ï –¢–†–û–ì–ê–ï–ú** –¥–æ –ø–æ–ª–Ω–æ–π —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ –ø–∏—Ç–µ—Ä—Å–∫–æ–≥–æ!

---

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–∞—Ç (< 5 –º–∏–Ω—É—Ç)

### –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

- DNS —É–∂–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω –Ω–∞ –ø–∏—Ç–µ—Ä—Å–∫–∏–π VPS
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –ø–∏—Ç–µ—Ä—Å–∫–æ–º VPS –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –æ—à–∏–±–∫–∞–º–∏
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å

### –®–∞–≥–∏:

#### 1. –í–µ—Ä–Ω—É—Ç—å DNS –Ω–∞ –º–æ—Å–∫–æ–≤—Å–∫–∏–π VPS (1 –º–∏–Ω—É—Ç–∞)

```bash
# –í DNS –ø–∞–Ω–µ–ª–∏ (–∏–ª–∏ Timeweb DNS):
bot.yourdomain.com ‚Üí 82.97.248.146  # –í–µ—Ä–Ω—É—Ç—å —Å—Ç–∞—Ä—ã–π IP
```

**–û–∂–∏–¥–∞–Ω–∏–µ:** TTL DNS (–æ–±—ã—á–Ω–æ 5-60 –º–∏–Ω—É—Ç)

#### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–æ—Å–∫–æ–≤—Å–∫–∏–π VPS (1 –º–∏–Ω—É—Ç–∞)

```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
ssh -i ~/.ssh/id_ed25519_ai_admin root@82.97.248.146

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
pm2 status
```

**–ï—Å–ª–∏ PM2 –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω:**

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pm2 start all

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
pm2 logs --lines 50
```

#### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É (2 –º–∏–Ω—É—Ç—ã)

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
pm2 logs --err --lines 50

# –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç—É
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç
```

#### 4. –û–±–Ω–æ–≤–∏—Ç—å Redis tunnel (1 –º–∏–Ω—É—Ç–∞)

```bash
# –õ–æ–∫–∞–ª—å–Ω–æ
./scripts/maintain-redis-tunnel.sh stop
ssh -L 6380:localhost:6379 root@82.97.248.146 -N &
```

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–π —É—Å–ø–µ—Ö–∞ –æ—Ç–∫–∞—Ç–∞:

- DNS —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –º–æ—Å–∫–æ–≤—Å–∫–∏–π VPS
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
- –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö

**–ò—Ç–æ–≥–æ:** –û—Ç–∫–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω, —Å–µ—Ä–≤–∏—Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

---

## üìç –û—Ç–∫–∞—Ç –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —ç—Ç–∞–ø–∞—Ö

### –≠—Ç–∞–ø 1-2: –°–æ–∑–¥–∞–Ω–∏–µ VPS / –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–æ–±–ª–µ–º–∞:** VPS –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è, –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ (Ctrl+C)
2. –£–¥–∞–ª–∏—Ç—å –ø–∏—Ç–µ—Ä—Å–∫–∏–π VPS (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
3. –ù–∏—á–µ–≥–æ –Ω–µ –º–µ–Ω—è—Ç—å –Ω–∞ –º–æ—Å–∫–æ–≤—Å–∫–æ–º VPS

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–æ—Å–∫–æ–≤—Å–∫–∏–π VPS —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–∏—á–µ–≥–æ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

**–ó–∞—Ç—Ä–∞—Ç—ã –≤—Ä–µ–º–µ–Ω–∏:** 0 –º–∏–Ω—É—Ç downtime

---

### –≠—Ç–∞–ø 3-7: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏–≤–∞—Ç–Ω–æ–π —Å–µ—Ç–∏ / –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ –ø—Ä–∏–≤–∞—Ç–Ω–æ–π —Å–µ—Ç–∏, PostgreSQL –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–î–µ–π—Å—Ç–≤–∏—è:**
1. **–ù–ï –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å DNS!**
2. –û—Å—Ç–∞–≤–∏—Ç—å –ø–∏—Ç–µ—Ä—Å–∫–∏–π VPS –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
3. –ú–æ—Å–∫–æ–≤—Å–∫–∏–π VPS –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–µ—Ä–≤–∏—Å –Ω–µ –ø—Ä–µ—Ä–≤–∞–Ω, –µ—Å—Ç—å –≤—Ä–µ–º—è –Ω–∞ –æ—Ç–ª–∞–¥–∫—É

**–ó–∞—Ç—Ä–∞—Ç—ã –≤—Ä–µ–º–µ–Ω–∏:** 0 –º–∏–Ω—É—Ç downtime

**–û—Ç–ª–∞–¥–∫–∞:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ VPS –≤ –ø—Ä–∏–≤–∞—Ç–Ω–æ–π —Å–µ—Ç–∏
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å IP PostgreSQL
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å .env —Ñ–∞–π–ª
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ PM2

---

### –≠—Ç–∞–ø 8: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å—Ö–µ–º—ã –ë–î

**–ü—Ä–æ–±–ª–µ–º–∞:** –û—à–∏–±–∫–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–∞–±–ª–∏—Ü

**–î–µ–π—Å—Ç–≤–∏—è:**
1. **–ù–ï –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å DNS!**
2. –ò–∑—É—á–∏—Ç—å –æ—à–∏–±–∫–∏ –≤ –≤—ã–≤–æ–¥–µ —Å–∫—Ä–∏–ø—Ç–∞
3. –ò—Å–ø—Ä–∞–≤–∏—Ç—å SQL –º–∏–≥—Ä–∞—Ü–∏–∏ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
4. –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ë–î –µ—Å–ª–∏ –∫—Ä–∏—Ç–∏—á–Ω–æ:
   ```bash
   # –í –ø–∞–Ω–µ–ª–∏ Timeweb —É–¥–∞–ª–∏—Ç—å –ë–î
   # –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –ë–î –≤ –°–ü–ë
   # –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å—Ö–µ–º—ã
   ```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–æ—Å–∫–æ–≤—Å–∫–∏–π VPS —Ä–∞–±–æ—Ç–∞–µ—Ç, –µ—Å—Ç—å –≤—Ä–µ–º—è –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

**–ó–∞—Ç—Ä–∞—Ç—ã –≤—Ä–µ–º–µ–Ω–∏:** 0 –º–∏–Ω—É—Ç downtime

---

### –≠—Ç–∞–ø 9: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –ø–∏—Ç–µ—Ä—Å–∫–æ–º VPS —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ —Å –æ—à–∏–±–∫–∞–º–∏

**–î–µ–π—Å—Ç–≤–∏—è:**
1. **–ù–ï –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å DNS!**
2. –ò–∑—É—á–∏—Ç—å –ª–æ–≥–∏:
   ```bash
   pm2 logs --err --lines 100
   ```
3. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã
4. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Ç–µ—Å—Ç—ã

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–æ—Å–∫–æ–≤—Å–∫–∏–π VPS —Ä–∞–±–æ—Ç–∞–µ—Ç, –µ—Å—Ç—å –≤—Ä–µ–º—è –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

**–ó–∞—Ç—Ä–∞—Ç—ã –≤—Ä–µ–º–µ–Ω–∏:** 0 –º–∏–Ω—É—Ç downtime

---

### –≠—Ç–∞–ø 10: DNS –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –æ—à–∏–±–∫–∞–º–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** DNS –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω, –Ω–æ –ø–∏—Ç–µ—Ä—Å–∫–∏–π VPS —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ

**–î–µ–π—Å—Ç–≤–∏—è:**
1. **–°—Ä–æ—á–Ω–æ –≤–µ—Ä–Ω—É—Ç—å DNS –Ω–∞ –º–æ—Å–∫–æ–≤—Å–∫–∏–π VPS** (—Å–º. "–ë—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–∞—Ç" –≤—ã—à–µ)
2. –î–æ–∂–¥–∞—Ç—å—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è DNS (TTL)
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–æ—Å–∫–æ–≤—Å–∫–∏–π VPS
4. –û—Ç–ª–∞–¥–∏—Ç—å –ø–∏—Ç–µ—Ä—Å–∫–∏–π VPS

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–µ—Ä–≤–∏—Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —á–µ—Ä–µ–∑ TTL –≤—Ä–µ–º–µ–Ω–∏

**–ó–∞—Ç—Ä–∞—Ç—ã –≤—Ä–µ–º–µ–Ω–∏:** TTL DNS (5-60 –º–∏–Ω—É—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ downtime)

---

### –≠—Ç–∞–ø 11: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, –ø—Ä–æ–±–ª–µ–º—ã —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–∏—Ç–µ—Ä—Å–∫–∏–π VPS –ø—Ä–æ—Ä–∞–±–æ—Ç–∞–ª –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤, –Ω–æ –Ω–∞—á–∞–ª–∏—Å—å –ø—Ä–æ–±–ª–µ–º—ã

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –û—Ü–µ–Ω–∏—Ç—å –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:
   - **–ö—Ä–∏—Ç–∏—á–Ω–æ** (—Å–µ—Ä–≤–∏—Å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç) ‚Üí –ë—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–∞—Ç DNS
   - **–ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ** (–Ω–µ–±–æ–ª—å—à–∏–µ –æ—à–∏–±–∫–∏) ‚Üí –û—Ç–ª–∞–¥–∫–∞ –Ω–∞ –º–µ—Å—Ç–µ

2. –ï—Å–ª–∏ –æ—Ç–∫–∞—Ç:
   - –í–µ—Ä–Ω—É—Ç—å DNS –Ω–∞ –º–æ—Å–∫–æ–≤—Å–∫–∏–π VPS
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–æ—Å–∫–æ–≤—Å–∫–∏–π VPS
   - –û—Ç–ª–∞–¥–∏—Ç—å –ø–∏—Ç–µ—Ä—Å–∫–∏–π VPS –±–µ–∑ —Å–ø–µ—à–∫–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏

---

## üõ†Ô∏è –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–µ—Ä–µ–¥ –æ—Ç–∫–∞—Ç–æ–º

### –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã

```bash
# –ù–∞ –ø–∏—Ç–µ—Ä—Å–∫–æ–º VPS
ssh root@$SPB_VPS_IP

# 1. –°—Ç–∞—Ç—É—Å PM2
pm2 status
# –û–∂–∏–¥–∞–µ–º: –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã "online"

# 2. –û—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö
pm2 logs --err --lines 50
# –û–∂–∏–¥–∞–µ–º: –Ω–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫

# 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
pm2 monit
# –û–∂–∏–¥–∞–µ–º: CPU <70%, Memory <80%

# 4. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
cd /opt/ai-admin
./scripts/test-timeweb-connection.sh
# –û–∂–∏–¥–∞–µ–º: ‚úÖ All tests passed

# 5. –¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è
# –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç—É
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –æ–±—Ä–∞–±–æ—Ç–∞–ª–æ—Å—å
```

### –†–µ—à–µ–Ω–∏–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ:

| –ü—Ä–æ–±–ª–µ–º–∞ | –î–µ–π—Å—Ç–≤–∏–µ |
|----------|----------|
| PM2 –ø—Ä–æ—Ü–µ—Å—Å—ã "errored" / "stopped" | –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å `pm2 restart all`, –µ—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–ª–æ ‚Üí –æ—Ç–∫–∞—Ç |
| –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö | –ê–Ω–∞–ª–∏–∑, –µ—Å–ª–∏ –Ω–µ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∑–∞ 5 –º–∏–Ω—É—Ç ‚Üí –æ—Ç–∫–∞—Ç |
| CPU/Memory >90% | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –µ—Å–ª–∏ –Ω–µ —è—Å–Ω–æ ‚Üí –æ—Ç–∫–∞—Ç |
| PostgreSQL –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—É—é —Å–µ—Ç—å, –µ—Å–ª–∏ –Ω–µ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è ‚Üí –æ—Ç–∫–∞—Ç |
| –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç | –ö—Ä–∏—Ç–∏—á–Ω–æ ‚Üí –æ—Ç–∫–∞—Ç |

---

## üìã –ß–µ–∫–ª–∏—Å—Ç –æ—Ç–∫–∞—Ç–∞

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

- [ ] –ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ (–Ω–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–π –≥–ª—é–∫)
- [ ] –ú–æ—Å–∫–æ–≤—Å–∫–∏–π VPS –ø—Ä–æ–≤–µ—Ä–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü—Ä–∏–Ω—è—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –æ–± –æ—Ç–∫–∞—Ç–µ
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω—ã (–µ—Å–ª–∏ –∫—Ä–∏—Ç–∏—á–Ω–æ)

### –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ç–∫–∞—Ç–∞

- [ ] DNS –∏–∑–º–µ–Ω–µ–Ω –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ –º–æ—Å–∫–æ–≤—Å–∫–∏–π IP
- [ ] –ú–æ—Å–∫–æ–≤—Å–∫–∏–π VPS –ø—Ä–æ–≤–µ—Ä–µ–Ω:
  - [ ] `pm2 status` ‚Üí –≤—Å–µ online
  - [ ] –ï—Å–ª–∏ –Ω–µ—Ç ‚Üí `pm2 start all`
- [ ] –õ–æ–≥–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã ‚Üí –Ω–µ—Ç –æ—à–∏–±–æ–∫
- [ ] –¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ
- [ ] Redis tunnel –æ–±–Ω–æ–≤–ª–µ–Ω (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

### –ü–æ—Å–ª–µ –æ—Ç–∫–∞—Ç–∞

- [ ] –°–µ—Ä–≤–∏—Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω—ã
- [ ] –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã –∑–∞–ø–∏—Å–∞–Ω–∞
- [ ] –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–∞–≤–ª–µ–Ω

---

## üîç –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### 1. "Connection timeout" –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ PostgreSQL

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π IP PostgreSQL –∏–ª–∏ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ –ø—Ä–∏–≤–∞—Ç–Ω–æ–π —Å–µ—Ç–∏

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å IP –≤ –ø—Ä–∏–≤–∞—Ç–Ω–æ–π —Å–µ—Ç–∏
ip addr show | grep 'inet 192.168'

# –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ IP PostgreSQL
for ip in 192.168.0.2 192.168.0.3 192.168.0.4; do
  echo -n "Testing $ip: "
  nc -zv $ip 5432
done
```

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å IP PostgreSQL –≤ –ø–∞–Ω–µ–ª–∏ Timeweb
- –û–±–Ω–æ–≤–∏—Ç—å POSTGRES_HOST –≤ .env
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å PM2

---

### 2. "Cannot find module" –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ PM2

**–ü—Ä–∏—á–∏–Ω–∞:** npm –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∏–ª–∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω—ã

**–†–µ—à–µ–Ω–∏–µ:**
```bash
cd /opt/ai-admin
rm -rf node_modules package-lock.json
npm install --production
pm2 restart all
```

---

### 3. WhatsApp —Å–µ—Å—Å–∏–∏ –ø–æ—Ç–µ—Ä—è–Ω—ã

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏—Å—å baileys_sessions

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```bash
ls -la /opt/ai-admin/baileys_sessions/
# –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–∞–ø–∫–∞ company_962302
```

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é —Å –º–æ—Å–∫–æ–≤—Å–∫–æ–≥–æ VPS
rsync -avz \
  -e "ssh -i ~/.ssh/id_ed25519_ai_admin" \
  root@82.97.248.146:/opt/ai-admin/baileys_sessions/ \
  root@$SPB_VPS_IP:/opt/ai-admin/baileys_sessions/

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å PM2
ssh root@$SPB_VPS_IP "cd /opt/ai-admin && pm2 restart all"
```

---

### 4. –í—ã—Å–æ–∫–∞—è –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –∫ PostgreSQL

**–ü—Ä–∏—á–∏–Ω–∞:** –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ —á–µ—Ä–µ–∑ –ø—Ä–∏–≤–∞—Ç–Ω—É—é —Å–µ—Ç—å

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∫–æ–π IP –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
grep POSTGRES_HOST /opt/ai-admin/.env

# –ï—Å–ª–∏ —ç—Ç–æ –ù–ï 192.168.0.x - –ø—Ä–æ–±–ª–µ–º–∞!
```

**–†–µ—à–µ–Ω–∏–µ:**
- –û–±–Ω–æ–≤–∏—Ç—å POSTGRES_HOST –Ω–∞ IP –∏–∑ –ø—Ä–∏–≤–∞—Ç–Ω–æ–π —Å–µ—Ç–∏
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å PM2

---

## üìä –¢–æ—á–∫–∏ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è

### –î–µ—Ä–µ–≤–æ —Ä–µ—à–µ–Ω–∏–π

```
–ü—Ä–æ–±–ª–µ–º–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞
    ‚îÇ
    ‚îú‚îÄ‚Üí DNS –Ω–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω?
    ‚îÇ   ‚îî‚îÄ‚Üí ‚úÖ –ù–ï–¢ –æ—Ç–∫–∞—Ç, –µ—Å—Ç—å –≤—Ä–µ–º—è –æ—Ç–ª–∞–¥–∏—Ç—å
    ‚îÇ
    ‚îú‚îÄ‚Üí DNS –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω?
    ‚îÇ   ‚îÇ
    ‚îÇ   ‚îú‚îÄ‚Üí –ü—Ä–æ–±–ª–µ–º–∞ –∫—Ä–∏—Ç–∏—á–Ω–∞ (—Å–µ—Ä–≤–∏—Å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)?
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚Üí ‚ö†Ô∏è –ë—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–∞—Ç DNS
    ‚îÇ   ‚îÇ
    ‚îÇ   ‚îî‚îÄ‚Üí –ü—Ä–æ–±–ª–µ–º–∞ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–∞ (–Ω–µ–±–æ–ª—å—à–∏–µ –æ—à–∏–±–∫–∏)?
    ‚îÇ       ‚îî‚îÄ‚Üí ‚úÖ –û—Ç–ª–∞–¥–∫–∞ –Ω–∞ –º–µ—Å—Ç–µ, –æ—Ç–∫–∞—Ç –µ—Å–ª–∏ –Ω–µ –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è
    ‚îÇ
    ‚îî‚îÄ‚Üí –ú–æ—Å–∫–æ–≤—Å–∫–∏–π VPS –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?
        ‚îî‚îÄ‚Üí üî• –ö–†–ò–¢–ò–ß–ù–û! –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–æ—Å–∫–æ–≤—Å–∫–∏–π VPS –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ
```

---

## üö® –ê–≤–∞—Ä–∏–π–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã

**Timeweb Support:**
- URL: https://timeweb.cloud/help
- Email: support@timeweb.com
- Telegram: @timeweb_support (–µ—Å–ª–∏ –µ—Å—Ç—å)

**–î–æ—Å—Ç—É–ø—ã:**
- –ú–æ—Å–∫–æ–≤—Å–∫–∏–π VPS: `ssh -i ~/.ssh/id_ed25519_ai_admin root@82.97.248.146`
- –ü–∏—Ç–µ—Ä—Å–∫–∏–π VPS: `ssh -i ~/.ssh/id_ed25519_ai_admin root@$SPB_VPS_IP`

---

## üìù –õ–æ–≥ –æ—Ç–∫–∞—Ç–∞

**–ï—Å–ª–∏ –≤—ã–ø–æ–ª–Ω—è–ª—Å—è –æ—Ç–∫–∞—Ç, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ:**

**–î–∞—Ç–∞ –æ—Ç–∫–∞—Ç–∞:** _____________________
**–í—Ä–µ–º—è –æ—Ç–∫–∞—Ç–∞:** _____________________
**–ü—Ä–∏—á–∏–Ω–∞:** _____________________
**–≠—Ç–∞–ø –º–∏–≥—Ä–∞—Ü–∏–∏:** _____________________
**–ö—Ç–æ –≤—ã–ø–æ–ª–Ω–∏–ª:** _____________________

**–î–µ–π—Å—Ç–≤–∏—è:**
- _____________________
- _____________________

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- _____________________

**–í—Ä–µ–º—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:** _____ –º–∏–Ω—É—Ç

**–£—Ä–æ–∫–∏:**
- _____________________
- _____________________

---

## ‚úÖ –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–∫–∞—Ç–∞

1. –°–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –º–æ—Å–∫–æ–≤—Å–∫–æ–º VPS
2. –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã –≤—ã—è–≤–ª–µ–Ω–∞
3. –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–∞–≤–ª–µ–Ω
4. –ü–∏—Ç–µ—Ä—Å–∫–∏–π VPS –º–æ–∂–Ω–æ:
   - –û—Å—Ç–∞–≤–∏—Ç—å –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
   - –£–¥–∞–ª–∏—Ç—å –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å
   - –£–¥–∞–ª–∏—Ç—å –µ—Å–ª–∏ –º–∏–≥—Ä–∞—Ü–∏—è –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è

**–ü—Ä–∏–Ω—è—Ç–æ —Ä–µ—à–µ–Ω–∏–µ:** _____________________

---

**–î–æ–∫—É–º–µ–Ω—Ç —É—Ç–≤–µ—Ä–∂–¥–µ–Ω:** _____________________
**–î–∞—Ç–∞:** 2025-10-31
