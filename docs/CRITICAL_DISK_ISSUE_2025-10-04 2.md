# üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê: –î–∏—Å–∫ –∑–∞–ø–æ–ª–Ω–µ–Ω –Ω–∞ 100%

**–î–∞—Ç–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è:** 4 –æ–∫—Ç—è–±—Ä—è 2025, 12:27 –ú–°–ö
**–°—Ç–∞—Ç—É—Å:** üî¥ –ö–†–ò–¢–ò–ß–ù–û - –°–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P0 - –¢—Ä–µ–±—É–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è

---

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞

–î–∏—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ `/dev/sda1` (30GB) –∑–∞–ø–æ–ª–Ω–µ–Ω –Ω–∞ **100%**.

### –î–æ –æ—á–∏—Å—Ç–∫–∏ (12:20):
```
Filesystem      Size  Used Avail Use% Mounted on
/dev/sda1        30G   30G     0 100% /
```

### –ü–æ—Å–ª–µ —á–∞—Å—Ç–∏—á–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ (12:25):
```
Filesystem      Size  Used Avail Use% Mounted on
/dev/sda1        30G  7.6G   22G  26% /
```

**–û—Å–≤–æ–±–æ–∂–¥–µ–Ω–æ:** 22GB
**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –°–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω, SSH timeout

---

## üîç –ß—Ç–æ –∑–∞–Ω–∏–º–∞–ª–æ –º–µ—Å—Ç–æ

### –ì–ª–∞–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞: –õ–æ–≥–∏ (23GB!)

```
23G   /opt/ai-admin/logs
  ‚îú‚îÄ‚îÄ 17G   baileys-out-16.log         ‚ùå –£–î–ê–õ–ï–ù–û
  ‚îú‚îÄ‚îÄ 4.3G  batch-processor-out-2.log  ‚ùå –£–î–ê–õ–ï–ù–û
  ‚îú‚îÄ‚îÄ 442M  api-out-0.log              ‚ùå –£–î–ê–õ–ï–ù–û
  ‚îî‚îÄ‚îÄ 261M  api-error-0.log            ‚ùå –£–î–ê–õ–ï–ù–û
```

### –î—Ä—É–≥–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:
```
171M  node_modules
3.7M  docs
2.9M  src
2.2M  baileys_sessions
1.2M  sync.log
```

---

## üí• –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è

1. **Git –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
   ```
   fatal: unable to write loose object file: No space left on device
   fatal: unpack-objects failed
   ```

2. **PM2 —Å–µ—Ä–≤–∏—Å—ã —É–ø–∞–ª–∏:**
   - –í—Å–µ 7 —Å–µ—Ä–≤–∏—Å–æ–≤ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å
   - API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (502 Bad Gateway)

3. **–°–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω:**
   - SSH –∫–æ–º–∞–Ω–¥—ã timeout
   - –°–∏—Å—Ç–µ–º–∞ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

---

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

1. **–£–¥–∞–ª–µ–Ω—ã –≥–∏–≥–∞–Ω—Ç—Å–∫–∏–µ –ª–æ–≥–∏:**
   ```bash
   rm -f /opt/ai-admin/logs/baileys-out-16.log          # 17GB
   rm -f /opt/ai-admin/logs/batch-processor-out-2.log   # 4.3GB
   rm -f /opt/ai-admin/logs/api-out-0.log               # 442MB
   rm -f /opt/ai-admin/logs/api-error-0.log             # 261MB
   ```

2. **–û—Å–≤–æ–±–æ–∂–¥–µ–Ω–æ 22GB –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞**

3. **–ó–∞–ø—É—â–µ–Ω—ã PM2 —Å–µ—Ä–≤–∏—Å—ã:**
   ```bash
   pm2 start ecosystem.config.js
   ```
   –°—Ç–∞—Ç—É—Å: ‚úÖ –í—Å–µ 7 —Å–µ—Ä–≤–∏—Å–æ–≤ –∑–∞–ø—É—â–µ–Ω—ã

---

## üö® –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞

**–°–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω** - –≤–µ—Ä–æ—è—Ç–Ω–æ –∏–∑-–∑–∞:
1. –†–µ–∑–∫–æ–≥–æ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –º–µ—Å—Ç–∞
2. –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö 7 —Å–µ—Ä–≤–∏—Å–æ–≤
3. –í–æ–∑–º–æ–∂–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π

**–°–∏–º–ø—Ç–æ–º—ã:**
- SSH –∫–æ–º–∞–Ω–¥—ã timeout –ø–æ—Å–ª–µ 30-120 —Å–µ–∫—É–Ω–¥
- API –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç (502)
- PM2 logs –∑–∞–≤–∏—Å–∞—é—Ç

---

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (–°–†–û–ß–ù–û!)

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:

1. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   ssh root@46.149.70.219 "reboot"
   ```
   –û–∂–∏–¥–∞–Ω–∏–µ: 2-3 –º–∏–Ω—É—Ç—ã

2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–æ—Ç–∞—Ü–∏—é –ª–æ–≥–æ–≤:**
   ```bash
   # PM2 log rotation
   pm2 install pm2-logrotate
   pm2 set pm2-logrotate:max_size 100M
   pm2 set pm2-logrotate:retain 3
   pm2 set pm2-logrotate:compress true
   ```

3. **–î–æ–±–∞–≤–∏—Ç—å cron –¥–ª—è –æ—á–∏—Å—Ç–∫–∏:**
   ```bash
   # /etc/cron.daily/cleanup-logs.sh
   #!/bin/bash
   find /opt/ai-admin/logs -name "*.log" -size +500M -delete
   find /opt/ai-admin/logs -name "*.log" -mtime +7 -delete
   ```

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:

4. **–£–≤–µ–ª–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä –¥–∏—Å–∫–∞:**
   - –¢–µ–∫—É—â–∏–π: 30GB
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π: 60GB+
   - –ò–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ç–æ–º –¥–ª—è –ª–æ–≥–æ–≤

5. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∏—Å–∫–∞:**
   ```javascript
   // –î–æ–±–∞–≤–∏—Ç—å –≤ health check
   const diskUsage = require('disk-usage');
   const path = require('path');

   app.get('/health', async (req, res) => {
     const disk = await diskUsage.check('/');
     const usagePercent = (disk.used / disk.total) * 100;

     if (usagePercent > 90) {
       // Telegram alert!
     }

     res.json({
       disk: {
         total: disk.total,
         used: disk.used,
         free: disk.free,
         usagePercent: usagePercent.toFixed(2)
       }
     });
   });
   ```

6. **–£–º–µ–Ω—å—à–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   ```javascript
   // ecosystem.config.js
   module.exports = {
     apps: [{
       name: 'ai-admin-api',
       max_memory_restart: '500M',
       error_file: '/dev/null',     // –û—Ç–∫–ª—é—á–∏—Ç—å error logs –≤ —Ñ–∞–π–ª
       out_file: '/dev/null',        // –û—Ç–∫–ª—é—á–∏—Ç—å out logs –≤ —Ñ–∞–π–ª
       log_date_format: 'YYYY-MM-DD HH:mm:ss',
       combine_logs: true
     }]
   };
   ```

---

## üìä –ü–æ—á–µ–º—É –ª–æ–≥–∏ —Ç–∞–∫ —Ä–∞–∑—Ä–æ—Å–ª–∏—Å—å?

### Baileys (17GB):
- WhatsApp –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º–Ω–æ–≥–æ debug –ª–æ–≥–æ–≤
- –ù–µ—Ç —Ä–æ—Ç–∞—Ü–∏–∏ –ª–æ–≥–æ–≤
- –†–∞–±–æ—Ç–∞–µ—Ç 24/7 —Å –∏—é–ª—è 2025

### Batch Processor (4.3GB):
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ
- –ö–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è
- Rapid-fire —Ä–µ–∂–∏–º –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º–Ω–æ–≥–æ –ª–æ–≥–æ–≤

### API (700MB):
- –í—Å–µ HTTP –∑–∞–ø—Ä–æ—Å—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

```bash
# 1. –î–∏—Å–∫
df -h /
# –û–∂–∏–¥–∞–µ–º: 20-25% –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

# 2. PM2 —Å–µ—Ä–≤–∏—Å—ã
pm2 status
# –û–∂–∏–¥–∞–µ–º: –í—Å–µ online

# 3. API
curl https://ai-admin.app/health
# –û–∂–∏–¥–∞–µ–º: 200 OK

# 4. Marketplace
curl https://ai-admin.app/marketplace/health
# –û–∂–∏–¥–∞–µ–º: 200 OK

# 5. –õ–æ–≥–∏
du -sh /opt/ai-admin/logs
# –û–∂–∏–¥–∞–µ–º: < 1GB
```

---

## üìù Checklist –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

- [ ] –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å PM2 —Å–µ—Ä–≤–∏—Å—ã
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å pm2-logrotate
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å max_size = 100M
- [ ] –î–æ–±–∞–≤–∏—Ç—å cron –¥–ª—è –æ—á–∏—Å—Ç–∫–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API health
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Marketplace health
- [ ] –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–∏—Å–∫–∞ –≤ health check
- [ ] –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –¥–∏—Å–∫–∞ –¥–æ 60GB

---

## üéØ –ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞

### –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ:
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å `df -h /`
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å `du -sh /opt/ai-admin/logs`

### –ï–∂–µ–º–µ—Å—è—á–Ω–æ:
- –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö baileys sessions (> 30 –¥–Ω–µ–π)
- –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤ (> 7 –¥–Ω–µ–π)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ node_modules –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç—ã

### –ü—Ä–∏ –¥–µ–ø–ª–æ–µ:
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–∞–∑–º–µ—Ä –ª–æ–≥–æ–≤ –ø–µ—Ä–µ–¥ —Ä–µ—Å—Ç–∞—Ä—Ç–æ–º
- –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤ –µ—Å–ª–∏ > 500MB

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

**–ù–ï –î–û–ü–£–°–ö–ê–¢–¨ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è!**

100% –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç—å –¥–∏—Å–∫–∞ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫:
- –ü–∞–¥–µ–Ω–∏—é –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å Git
- –ö–æ—Ä—Ä—É–ø—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
- –ü–æ—Ç–µ—Ä–µ –¥–∞–Ω–Ω—ã—Ö

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —É—Ä–æ–≤–µ–Ω—å:** 90%
**–î–µ–π—Å—Ç–≤–∏–µ:** –ù–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞

**–ö–æ–º—Ñ–æ—Ä—Ç–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å:** < 70%

---

**–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω:** Claude Code
**–î–∞—Ç–∞:** 4 –æ–∫—Ç—è–±—Ä—è 2025, 12:30 –ú–°–ö
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ P0 - –ö–†–ò–¢–ò–ß–ù–û
