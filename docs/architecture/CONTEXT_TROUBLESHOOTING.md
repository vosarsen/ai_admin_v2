# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—é –Ω–µ–ø–æ–ª–∞–¥–æ–∫ —Å–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

## –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### 1. –ö–æ–Ω—Ç–µ–∫—Å—Ç –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

#### –°–∏–º–ø—Ç–æ–º—ã
- –ë–æ—Ç –Ω–µ –ø–æ–º–Ω–∏—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –¢–µ—Ä—è–µ—Ç—Å—è –≤—ã–±–æ—Ä —É—Å–ª—É–≥–∏/–º–∞—Å—Ç–µ—Ä–∞/–¥–∞—Ç—ã
- –ö–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ –Ω–æ–≤—ã–π –¥–∏–∞–ª–æ–≥

#### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Redis –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
redis-cli ping

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ MCP
@redis get_context phone:79686484488

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
grep "Failed to save context" logs/app.log
```

#### –†–µ—à–µ–Ω–∏—è

**1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Redis –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å Redis
systemctl status redis

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
echo $REDIS_URL

# –¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
redis-cli -h localhost -p 6379 ping
```

**2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è saveContext:**
```javascript
// –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ ai-admin-v2/index.js
// –ü–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—ã–∑–æ–≤:
await contextManager.saveContext(phone, companyId, {
  userMessage: message,
  botResponse: result.response,
  selection: extractedSelection
});
```

**3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π:**
```javascript
// –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã
await contextService.updateContext(...);
await contextService.updateContext(...); // –ø–µ—Ä–µ–∑–∞–ø–∏—à–µ—Ç –ø–µ—Ä–≤—ã–π!

// –ü–†–ê–í–ò–õ–¨–ù–û - –æ–¥–∏–Ω –∞—Ç–æ–º–∞—Ä–Ω—ã–π –≤—ã–∑–æ–≤
await contextManager.saveContext(phone, companyId, allUpdates);
```

---

### 2. –ë–æ—Ç –ø—É—Ç–∞–µ—Ç –¥–∞—Ç—ã (—Å–µ–≥–æ–¥–Ω—è/–∑–∞–≤—Ç—Ä–∞)

#### –°–∏–º–ø—Ç–æ–º—ã
- –°–ø—Ä–∞—à–∏–≤–∞—é—Ç –ø—Ä–æ "–∑–∞–≤—Ç—Ä–∞", –±–æ—Ç –∏—â–µ—Ç –Ω–∞ "—Å–µ–≥–æ–¥–Ω—è"
- –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –¥–∞—Ç—ã, –±–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥—Ä—É–≥—É—é –¥–∞—Ç—É
- –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–∞—Ç—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

#### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é –¥–∞—Ç—É –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ
@redis get_context phone:79686484488

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ –ª–æ–≥–∞—Ö –∫–∞–∫–∞—è –¥–∞—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
grep "lastDate" logs/app.log
grep "date=" logs/app.log
```

#### –†–µ—à–µ–Ω–∏—è

**1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–¥–∞—á—É redisContext –≤ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä:**
```javascript
// –í ai-admin-v2/index.js –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
context.redisContext = redisContext;
```

**2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ–º–ø—Ç –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ lastDate:**
```javascript
// –í two-stage-command-prompt.js –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–∞–≤–∏–ª–∞:
"üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û - –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï –î–ê–¢–´ –ò–ó –ö–û–ù–¢–ï–ö–°–¢–ê:
- –ï–°–õ–ò –í –ö–û–ù–¢–ï–ö–°–¢–ï –ï–°–¢–¨ lastDate ‚Üí –í–°–ï–ì–î–ê –ò–°–ü–û–õ–¨–ó–£–ô –ï–Å!"
```

**3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞—Ç—ã –ø–æ—Å–ª–µ SEARCH_SLOTS:**
```javascript
// –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SEARCH_SLOTS –¥–æ–ª–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è:
if (cmd.command === 'SEARCH_SLOTS' && cmd.params?.date) {
  await contextService.setContext(phone, companyId, {
    data: { lastDate: cmd.params.date }
  });
}
```

**4. –í–∫–ª—é—á–∏—Ç–µ debug –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
```bash
DEBUG=ai-admin:context* npm run dev
```

---

### 3. –í—ã—Å–æ–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

#### –°–∏–º–ø—Ç–æ–º—ã
- –ú–µ–¥–ª–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –±–æ—Ç–∞ (>5 —Å–µ–∫—É–Ω–¥)
- –¢–∞–π–º–∞—É—Ç—ã –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- –í—ã—Å–æ–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU

#### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
```javascript
// –î–æ–±–∞–≤—å—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
const start = Date.now();
const context = await contextManager.loadFullContext(phone, companyId);
console.log(`Context loaded in ${Date.now() - start}ms`);
```

#### –†–µ—à–µ–Ω–∏—è

**1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ cache hit rate:**
```javascript
const stats = contextManager.getCacheStats();
console.log(`Cache hit rate: ${stats.memory.hitRate}`);
// –î–æ–ª–∂–µ–Ω –±—ã—Ç—å >70%
```

**2. –£–≤–µ–ª–∏—á—å—Ç–µ —Ä–∞–∑–º–µ—Ä –∫—ç—à–∞:**
```javascript
// –í modules-config.js
{
  cache: {
    contextCacheSize: 100,  // —É–≤–µ–ª–∏—á–∏—Ç—å —Å 50
    contextCacheTTL: 600000  // —É–≤–µ–ª–∏—á–∏—Ç—å –¥–æ 10 –º–∏–Ω—É—Ç
  }
}
```

**3. –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –±–∞–∑–µ:**
```sql
-- –î–æ–±–∞–≤—å—Ç–µ –∏–Ω–¥–µ–∫—Å—ã –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
CREATE INDEX idx_clients_phone_company ON clients(phone, company_id);
CREATE INDEX idx_services_company_active ON services(company_id, active);
```

**4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Redis pipeline:**
```javascript
// –í–º–µ—Å—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
const dialog = await redis.hgetall(dialogKey);
const client = await redis.hgetall(clientKey);

// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ pipeline
const pipeline = redis.pipeline();
pipeline.hgetall(dialogKey);
pipeline.hgetall(clientKey);
const [dialog, client] = await pipeline.exec();
```

---

### 4. –ö–æ–Ω—Ç–µ–∫—Å—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –∏–ª–∏ —Ç–µ—Ä—è–µ—Ç—Å—è

#### –°–∏–º–ø—Ç–æ–º—ã
- –î–∞–Ω–Ω—ã–µ –∏–∑ –æ–¥–Ω–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –¥—Ä—É–≥–æ–π
- –°—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—é—Ç –Ω–æ–≤—ã–µ
- Race conditions –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö

#### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
grep "Processing message from" logs/app.log | tail -20

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
@redis get_all_keys pattern:processing:*
```

#### –†–µ—à–µ–Ω–∏—è

**1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
```javascript
// –í message-processor.js –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞:
await this.checkAndWaitForPreviousProcessing(phone);
```

**2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å–ª–∏—è–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:**
```javascript
// –í context-service-v2.js
selection = {
  ...oldSelection,
  ...newSelection,
  // –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø–æ–ª—è –Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º null/undefined
  date: newSelection.date !== undefined ? newSelection.date : oldSelection.date
};
```

**3. –ò–∑–æ–ª–∏—Ä—É–π—Ç–µ –ø–æ companyId:**
```javascript
// –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ—Å—Ç–∞–≤–Ω–æ–π –∫–ª—é—á
const key = `context:${companyId}:${phone}:dialog`;
```

---

### 5. Memory leak –∏–ª–∏ –≤—ã—Å–æ–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏

#### –°–∏–º–ø—Ç–æ–º—ã
- –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π —Ä–æ—Å—Ç –ø–∞–º—è—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞
- Out of memory errors
- –ó–∞–º–µ–¥–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º

#### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
```bash
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞–º—è—Ç–∏
pm2 monit

# Heap snapshot
node --inspect src/workers/index-v2.js
# –û—Ç–∫—Ä–æ–π—Ç–µ chrome://inspect –∏ —Å–¥–µ–ª–∞–π—Ç–µ heap snapshot
```

#### –†–µ—à–µ–Ω–∏—è

**1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—á–∏—Å—Ç–∫—É –∫—ç—à–∞:**
```javascript
// –î–æ–ª–∂–µ–Ω –±—ã—Ç—å cleanup interval
this.cleanupInterval = setInterval(() => {
  this.memoryCache.cleanup();
}, 60000);
```

**2. –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ —Ä–∞–∑–º–µ—Ä –∫—ç—à–∞:**
```javascript
// –í LRUCache
if (this.cache.size >= this.maxSize) {
  const oldestKey = this.cache.keys().next().value;
  this.cache.delete(oldestKey);
}
```

**3. –û—á–∏—â–∞–π—Ç–µ –±–æ–ª—å—à–∏–µ –æ–±—ä–µ–∫—Ç—ã:**
```javascript
// –ü–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
context = null;
result = null;
```

---

### 6. –û—à–∏–±–∫–∏ Redis: "ReplyError: WRONGTYPE"

#### –°–∏–º–ø—Ç–æ–º—ã
- –û—à–∏–±–∫–∞ "WRONGTYPE Operation against a key holding the wrong kind of value"
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å/–ø—Ä–æ—á–∏—Ç–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç

#### –†–µ—à–µ–Ω–∏—è

**1. –û—á–∏—Å—Ç–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã–π –∫–ª—é—á:**
```bash
redis-cli DEL context:962302:79686484488:dialog
```

**2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∏–ø –∫–ª—é—á–∞:**
```bash
redis-cli TYPE context:962302:79686484488:dialog
# –î–æ–ª–∂–µ–Ω –±—ã—Ç—å "hash"
```

**3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:**
```javascript
// –î–ª—è hash –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ hset/hgetall
await redis.hset(key, field, value);  // ‚úì
await redis.set(key, value);          // ‚úó –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è hash
```

---

### 7. –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

#### –°–∏–º–ø—Ç–æ–º—ã
- intermediateContext –≤—Å–µ–≥–¥–∞ null
- –ù–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —É–ø–æ–º—è–Ω—É—Ç—ã–µ —É—Å–ª—É–≥–∏/–º–∞—Å—Ç–µ—Ä–∞
- –¢–µ—Ä—è–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–∫—Å—Ç –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

#### –†–µ—à–µ–Ω–∏—è

**1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:**
```javascript
// –í ai-admin-v2/index.js
await intermediateContext.saveProcessingStart(phone, message, context);
await intermediateContext.updateAfterAIAnalysis(phone, aiResponse, commands);
```

**2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É:**
```javascript
// –í cached-data-loader.js
const intermediate = await intermediateContext.getContext(normalizedPhone);
```

---

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### Redis –∫–æ–º–∞–Ω–¥—ã
```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∫–ª—é—á–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
redis-cli --scan --pattern "context:*"

# –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã (–û–°–¢–û–†–û–ñ–ù–û!)
redis-cli --scan --pattern "context:*" | xargs redis-cli DEL

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–æ–º–∞–Ω–¥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
redis-cli MONITOR

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å TTL –∫–ª—é—á–∞
redis-cli TTL context:962302:79686484488:dialog
```

### MCP –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```bash
# –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
@redis get_context phone:79686484488

# –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
@redis clear_context phone:79686484488

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —ç—Ç–∞–ø –∑–∞–ø–∏—Å–∏
@redis set_booking_stage phone:79686484488 stage:selecting_service

# –°–¥–µ–ª–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–∞ "–ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º"
@redis simulate_returning_client phone:79686484488 visits:10

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã
@redis list_active_contexts
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
```javascript
// –î–æ–±–∞–≤—å—Ç–µ –≤ –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –º–µ—Å—Ç–∞
logger.debug('Context before save:', JSON.stringify(context, null, 2));
logger.debug('Updates to apply:', updates);
logger.debug('Result after save:', result);
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```javascript
// –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞
const metrics = {
  loadStart: Date.now(),
  loadEnd: 0,
  processStart: 0,
  processEnd: 0,
  saveStart: 0,
  saveEnd: 0
};

// –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞
metrics.loadEnd = Date.now();
console.log(`Load time: ${metrics.loadEnd - metrics.loadStart}ms`);
```

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø–æ–º–æ—â–∏

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `pm2 logs ai-admin-worker-v2 --lines 100`
2. –í–∫–ª—é—á–∏—Ç–µ debug —Ä–µ–∂–∏–º: `DEBUG=ai-admin:* npm run dev`
3. –°–æ–∑–¥–∞–π—Ç–µ issue –Ω–∞ GitHub —Å:
   - –û–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã
   - –õ–æ–≥–∞–º–∏ –æ—à–∏–±–∫–∏
   - –®–∞–≥–∞–º–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
   - –í–µ—Ä—Å–∏–µ–π —Å–∏—Å—Ç–µ–º—ã

## –ü—Ä–µ–≤–µ–Ω—Ç–∏–≤–Ω—ã–µ –º–µ—Ä—ã

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –Ω–∞ cache hit rate <70%
   - –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ >3 —Å–µ–∫—É–Ω–¥
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ memory usage

2. **–†–µ–≥—É–ª—è—Ä–Ω–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ**
   - –û—á–∏—â–∞–π—Ç–µ —Å—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é
   - –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ä–∞–∑–º–µ—Ä Redis –±–∞–∑—ã
   - –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –º–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã–µ –¥–∏–∞–ª–æ–≥–∏
   - –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ load testing –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏