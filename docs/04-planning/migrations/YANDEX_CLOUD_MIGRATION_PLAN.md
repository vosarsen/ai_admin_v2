# ĞŸĞ»Ğ°Ğ½ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ½Ğ° Yandex Cloud Database

**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
**Ğ”Ğ°Ñ‚Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ:** 2025-10-31
**Ğ“Ñ€Ğ°Ğ½Ñ‚:** Yandex Cloud 4000â‚½ (Ğ¾Ğ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¾Ğ´Ğ¾Ğ±Ñ€ĞµĞ½Ğ¸Ñ, Ğ´Ğ¾ 7 Ğ´Ğ½ĞµĞ¹)

---

## Ğ¢ĞµĞºÑƒÑ‰ĞµĞµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ‘Ğ” Ğ² Supabase

### Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ Ğ¸ Ğ¾Ğ±ÑŠĞµĞ¼ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

| Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° | Ğ—Ğ°Ğ¿Ğ¸ÑĞµĞ¹ | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|---------|---------|------------|
| `companies` | 1 | ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ ÑĞ°Ğ»Ğ¾Ğ½Ğ° KULTURA |
| `clients` | 1,292 | ĞšĞ»Ğ¸ĞµĞ½Ñ‚ÑĞºĞ°Ñ Ğ±Ğ°Ğ·Ğ° Ñ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸ĞµĞ¹ Ğ²Ğ¸Ğ·Ğ¸Ñ‚Ğ¾Ğ² |
| `bookings` | 49 | Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğµ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ¾Ğ² |
| `services` | 63 | Ğ£ÑĞ»ÑƒĞ³Ğ¸ ÑĞ°Ğ»Ğ¾Ğ½Ğ° |
| `staff` | 12 | ĞœĞ°ÑÑ‚ĞµÑ€Ğ° |
| `staff_schedules` | 56 | Ğ Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ¼Ğ°ÑÑ‚ĞµÑ€Ğ¾Ğ² |
| `dialog_contexts` | 21 | Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ AI Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³Ğ¾Ğ² |
| `messages` | 0 | Ğ¡Ğ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ (Ğ¿ÑƒÑÑ‚Ğ°Ñ) |
| `actions` | 0 | Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ (Ğ¿ÑƒÑÑ‚Ğ°Ñ) |
| `company_sync_status` | 0 | Ğ¡Ğ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ (Ğ¿ÑƒÑÑ‚Ğ°Ñ) |

**ĞĞ±Ñ‰Ğ¸Ğ¹ Ğ¾Ğ±ÑŠĞµĞ¼:** ~1,500 Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹ + JSON history Ğ² clients

---

## ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Dual-Database

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Application Layer                       â”‚
â”‚         src/services/ai-admin-v2/                   â”‚
â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      Database Adapter (NEW)                  â”‚  â”‚
â”‚  â”‚      src/integrations/database/              â”‚  â”‚
â”‚  â”‚                                              â”‚  â”‚
â”‚  â”‚  Ğ ĞµĞ¶Ğ¸Ğ¼Ñ‹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ (env: DB_MODE):              â”‚  â”‚
â”‚  â”‚  - supabase     â†’ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Supabase (default)  â”‚  â”‚
â”‚  â”‚  - dual-write   â†’ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Ğ² Ğ¾Ğ±Ğµ, Ñ‡Ñ‚ĞµĞ½Ğ¸Ğµ Ğ¸Ğ· SB â”‚  â”‚
â”‚  â”‚  - dual-read    â†’ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Ğ² Ğ¾Ğ±Ğµ, Ñ‡Ñ‚ĞµĞ½Ğ¸Ğµ Ğ¸Ğ· YC â”‚  â”‚
â”‚  â”‚  - yandex       â†’ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Yandex Cloud        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                    â”‚
              â”‚                    â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
      â”‚   Supabase    â”‚    â”‚ Yandex Cloud â”‚
      â”‚   (Primary)   â”‚    â”‚  (Secondary) â”‚
      â”‚               â”‚    â”‚              â”‚
      â”‚  PostgreSQL   â”‚    â”‚  PostgreSQL  â”‚
      â”‚   Current     â”‚    â”‚  Managed DB  â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                      â”‚
            â”‚   Sync Monitor       â”‚
            â””â”€â”€â”€â”€â”€â”€â–º â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              (Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…)
```

---

## Ğ­Ñ‚Ğ°Ğ¿Ñ‹ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸

### Ğ­Ñ‚Ğ°Ğ¿ 1: ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ° Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹ (1-2 Ğ´Ğ½Ñ)

**ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ:**
- âœ… Ğ—Ğ°ÑĞ²ĞºĞ° Ğ½Ğ° Ğ³Ñ€Ğ°Ğ½Ñ‚ Yandex Cloud Ğ¿Ğ¾Ğ´Ğ°Ğ½Ğ°
- â³ ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¾Ğ´Ğ¾Ğ±Ñ€ĞµĞ½Ğ¸Ñ (Ğ´Ğ¾ 7 Ğ´Ğ½ĞµĞ¹)
- ğŸ’° Ğ“Ñ€Ğ°Ğ½Ñ‚: 4000â‚½ ÑÑ‚Ğ°Ñ€Ñ‚Ğ¾Ğ²Ñ‹Ğ¹ ĞºĞ°Ğ¿Ğ¸Ñ‚Ğ°Ğ»

**ĞŸĞ¾ÑĞ»Ğµ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ñ Ğ³Ñ€Ğ°Ğ½Ñ‚Ğ°:**

1. **Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Managed PostgreSQL Ğ² Yandex Cloud**
   ```bash
   # Ğ§ĞµÑ€ĞµĞ· Yandex Cloud Console:
   # 1. Managed Service for PostgreSQL
   # 2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ»Ğ°ÑÑ‚ĞµÑ€:
   #    - Ğ’ĞµÑ€ÑĞ¸Ñ: PostgreSQL 15
   #    - ĞšĞ»Ğ°ÑÑ Ñ…Ğ¾ÑÑ‚Ğ°: s2.small (2 vCPU, 8 GB RAM) - ÑÑ‚Ğ°Ñ€Ñ‚
   #    - Ğ”Ğ¸ÑĞº: 10 GB SSD (Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ ÑƒĞ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ñ‚ÑŒ)
   #    - Ğ”Ğ¾ÑÑ‚ÑƒĞ¿: Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ ÑĞµÑ€Ğ²ĞµÑ€Ğ° AI Admin (whitelist IP)
   ```

2. **Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑÑ…ĞµĞ¼Ñƒ Ğ¸Ğ· Supabase**
   ```bash
   # Ğ¡ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ¼Ğ°ÑˆĞ¸Ğ½Ñ‹:
   pg_dump -h <supabase_host> -U postgres -d postgres \
     --schema-only -n public -f schema.sql
   ```

3. **ĞŸÑ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ ÑÑ…ĞµĞ¼Ñƒ Ğ² Yandex Cloud**
   ```bash
   psql -h <yandex_host> -U admin -d postgres -f schema.sql
   ```

4. **ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ**
   ```bash
   # .env Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€Ğµ:
   YANDEX_DB_HOST=c-xxx.rw.mdb.yandexcloud.net
   YANDEX_DB_PORT=6432
   YANDEX_DB_USER=admin
   YANDEX_DB_PASSWORD=<password>
   YANDEX_DB_NAME=postgres
   YANDEX_DB_SSL=true
   ```

---

### Ğ­Ñ‚Ğ°Ğ¿ 2: Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Database Adapter (3-5 Ğ´Ğ½ĞµĞ¹)

**Ğ¦ĞµĞ»ÑŒ:** Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ğ·Ñ€Ğ°Ñ‡Ğ½Ñ‹Ğ¹ ÑĞ»Ğ¾Ğ¹ Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ğ´Ğ²ÑƒĞ¼Ñ Ğ‘Ğ” Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾.

**Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° ĞºĞ¾Ğ´Ğ°:**
```
src/integrations/database/
â”œâ”€â”€ adapter.js          # Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ Ğ°Ğ´Ğ°Ğ¿Ñ‚ĞµÑ€
â”œâ”€â”€ supabase-client.js  # ĞšĞ»Ğ¸ĞµĞ½Ñ‚ Supabase (ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¹)
â”œâ”€â”€ yandex-client.js    # ĞšĞ»Ğ¸ĞµĞ½Ñ‚ Yandex Cloud (NEW)
â”œâ”€â”€ sync-validator.js   # Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ (NEW)
â””â”€â”€ index.js           # Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚
```

**ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»:**
```javascript
// adapter.js
class DatabaseAdapter {
  constructor(mode = 'supabase') {
    this.mode = process.env.DB_MODE || mode;
    this.supabase = new SupabaseClient();
    this.yandex = new YandexClient();
    this.validator = new SyncValidator();
  }

  async query(table, filter) {
    switch (this.mode) {
      case 'supabase':
        return this.supabase.query(table, filter);

      case 'dual-write':
        // Ğ—Ğ°Ğ¿Ğ¸ÑÑŒ Ğ² Ğ¾Ğ±Ğµ, Ñ‡Ñ‚ĞµĞ½Ğ¸Ğµ Ğ¸Ğ· Supabase
        const result = await this.supabase.query(table, filter);
        await this.yandex.query(table, filter).catch(err => {
          console.error('Yandex write failed:', err);
        });
        return result;

      case 'dual-read':
        // Ğ—Ğ°Ğ¿Ğ¸ÑÑŒ Ğ² Ğ¾Ğ±Ğµ, Ñ‡Ñ‚ĞµĞ½Ğ¸Ğµ Ğ¸Ğ· Yandex
        const yandexResult = await this.yandex.query(table, filter);
        await this.supabase.query(table, filter).catch(err => {
          console.error('Supabase write failed:', err);
        });
        return yandexResult;

      case 'yandex':
        return this.yandex.query(table, filter);
    }
  }
}
```

**Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ:**
- Ğ—Ğ°Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ Ğ¿Ñ€ÑĞ¼Ñ‹Ğµ Ğ²Ñ‹Ğ·Ğ¾Ğ²Ñ‹ Supabase Ğ½Ğ° DatabaseAdapter
- ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ğ² ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ĞµĞ¼ ĞºĞ¾Ğ´Ğµ
- Fallback Ğ½Ğ° Supabase Ğ¿Ñ€Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°Ñ…

---

### Ğ­Ñ‚Ğ°Ğ¿ 3: ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (1 Ğ´ĞµĞ½ÑŒ)

**ĞŸĞµÑ€Ğ²Ğ¸Ñ‡Ğ½Ğ°Ñ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ:**
```bash
# Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸: scripts/migrate-to-yandex.js
node scripts/migrate-to-yandex.js --tables all --validate
```

**Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ Ğ´Ğ»Ñ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ (Ğ² Ğ¿Ğ¾Ñ€ÑĞ´ĞºĞµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹):**
1. `companies` (1 Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ) - Ğ±ĞµĞ· Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹
2. `services` (63 Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸) - Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ companies
3. `staff` (12 Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹) - Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ companies
4. `staff_schedules` (56) - Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ staff
5. `clients` (1,292) - Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ companies
6. `bookings` (49) - Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ clients, staff, services
7. `dialog_contexts` (21) - Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ clients (Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾)
8. `messages`, `actions`, `company_sync_status` (Ğ¿ÑƒÑÑ‚Ñ‹Ğµ)

**Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ÑĞ»Ğµ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸:**
```javascript
// ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹
const supabaseCount = await supabase.from('clients').select('count');
const yandexCount = await yandex.query('SELECT COUNT(*) FROM clients');
assert(supabaseCount === yandexCount);

// ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ÑŒĞ½Ñ‹Ğµ ÑÑƒĞ¼Ğ¼Ñ‹ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
const supabaseHash = await computeHash('clients', ['phone', 'name']);
const yandexHash = await computeHash('clients', ['phone', 'name']);
assert(supabaseHash === yandexHash);
```

---

### Ğ­Ñ‚Ğ°Ğ¿ 4: Dual-Write Ñ€ĞµĞ¶Ğ¸Ğ¼ (7-14 Ğ´Ğ½ĞµĞ¹ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ)

**Ğ¦ĞµĞ»ÑŒ:** Ğ£Ğ±ĞµĞ´Ğ¸Ñ‚ÑŒÑÑ, Ñ‡Ñ‚Ğ¾ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Ğ² Yandex Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾.

**Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ:**
```bash
# ĞĞ° ÑĞµÑ€Ğ²ĞµÑ€Ğµ:
export DB_MODE=dual-write
pm2 restart ai-admin-worker-v2
```

**ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³:**
- Ğ›Ğ¾Ğ³Ğ¸ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸ Ğ² Yandex
- Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ‘Ğ” ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ
- ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ (latency Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²)

**ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ ÑƒÑĞ¿ĞµÑ…Ğ°:**
- âœ… 99.9% ÑƒÑĞ¿ĞµÑˆĞ½Ñ‹Ñ… Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹ Ğ² Yandex
- âœ… Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ‡Ğ½Ñ‹ Ğ² Ğ¾Ğ±ĞµĞ¸Ñ… Ğ‘Ğ”
- âœ… Latency < 100ms Ñ€Ğ°Ğ·Ğ½Ğ¸Ñ†Ñ‹

---

### Ğ­Ñ‚Ğ°Ğ¿ 5: Dual-Read Ñ€ĞµĞ¶Ğ¸Ğ¼ (7 Ğ´Ğ½ĞµĞ¹ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ)

**Ğ¦ĞµĞ»ÑŒ:** ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ‡Ñ‚ĞµĞ½Ğ¸Ğµ Ğ¸Ğ· Yandex Ğ² production.

**Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ:**
```bash
# ĞĞ° ÑĞµÑ€Ğ²ĞµÑ€Ğµ:
export DB_MODE=dual-read
pm2 restart ai-admin-worker-v2
```

**ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³:**
- ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ AI Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ²
- ĞšĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ² Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°Ñ… Ğ±Ğ¾Ñ‚Ğ°
- Latency Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ğº Yandex
- ĞÑˆĞ¸Ğ±ĞºĞ¸ ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ñ

**Ğ¡Ñ€Ğ°Ğ²Ğ½ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸:**
```bash
# Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚ benchmark: scripts/benchmark-databases.js
node scripts/benchmark-databases.js --queries 1000 --mode dual-read
```

**Rollback plan:**
```bash
# ĞŸÑ€Ğ¸ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°Ñ…:
export DB_MODE=dual-write  # Ğ’ĞµÑ€Ğ½ÑƒÑ‚ÑŒÑÑ Ğ½Ğ° Ñ‡Ñ‚ĞµĞ½Ğ¸Ğµ Ğ¸Ğ· Supabase
pm2 restart ai-admin-worker-v2
```

---

### Ğ­Ñ‚Ğ°Ğ¿ 6: Ğ¤Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´ (Ğ¿Ğ¾ÑĞ»Ğµ 14 Ğ´Ğ½ĞµĞ¹ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾Ğ³Ğ¾ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ)

**Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ:**
```bash
# ĞĞ° ÑĞµÑ€Ğ²ĞµÑ€Ğµ:
export DB_MODE=yandex
pm2 restart ai-admin-worker-v2
```

**Supabase Ğ² Ñ€ĞµĞ¶Ğ¸Ğ¼Ğµ Ñ€ĞµĞ·ĞµÑ€Ğ²Ğ½Ğ¾Ğ¹ ĞºĞ¾Ğ¿Ğ¸Ğ¸:**
- ĞÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ÑŒ Supabase Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¼ 30 Ğ´Ğ½ĞµĞ¹
- Ğ•Ğ¶ĞµĞ´Ğ½ĞµĞ²Ğ½Ñ‹Ğµ Ğ±ÑĞºĞ°Ğ¿Ñ‹ Ğ¸Ğ· Yandex Ğ² Supabase
- ĞŸĞ¾ÑĞ»Ğµ 30 Ğ´Ğ½ĞµĞ¹ ÑÑ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾Ğ¹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ - Ğ¾Ñ‚ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Supabase

---

## ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ° Yandex Cloud

### Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ
1. **Managed PostgreSQL** - Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ±ÑĞºĞ°Ğ¿Ñ‹, Ğ¿Ğ°Ñ‚Ñ‡Ğ¸, Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³
2. **ĞĞ¸Ğ·ĞºĞ°Ñ Ğ»Ğ°Ñ‚ĞµĞ½Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ** - ÑĞµÑ€Ğ²ĞµÑ€Ñ‹ Ğ² Ğ Ğ¤ (vs Supabase Ğ² Ğ•Ğ²Ñ€Ğ¾Ğ¿Ğµ)
3. **ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾ÑÑ‚ÑŒ** - Ğ»ĞµĞ³ĞºĞ¾ ÑƒĞ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ñ‚ÑŒ CPU/RAM/Ğ´Ğ¸ÑĞº
4. **Ğ’Ñ‹ÑĞ¾ĞºĞ°Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾ÑÑ‚ÑŒ** - SLA 99.95%

### Ğ¤Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ğµ
1. **Ğ‘ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ñ‹Ğ¹ Ğ³Ñ€Ğ°Ğ½Ñ‚ 4000â‚½** Ğ´Ğ»Ñ ÑÑ‚Ğ°Ñ€Ñ‚Ğ°
2. **ĞŸÑ€Ğ¾Ğ·Ñ€Ğ°Ñ‡Ğ½Ñ‹Ğµ Ñ†ĞµĞ½Ñ‹** - Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğ° Ğ·Ğ° Ñ€ĞµÑÑƒÑ€ÑÑ‹
3. **ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ğ¾Ğ²** - Ğ¿Ñ€Ğ¾Ğ³Ğ½Ğ¾Ğ· Ñ‚Ñ€Ğ°Ñ‚

### ĞĞ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğµ
1. **ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¾Ğ¼** - Ğ±Ñ‹ÑÑ‚Ñ€Ğ°Ñ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒ
2. **Ğ Ğ¾ÑÑĞ¸Ğ¹ÑĞºĞ°Ñ ÑÑ€Ğ¸ÑĞ´Ğ¸ĞºÑ†Ğ¸Ñ** - ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²Ğ¸Ğµ Ğ¤Ğ—-152
3. **Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ Ğ´Ñ€ÑƒĞ³Ğ¸Ğ¼Ğ¸ ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ğ¼Ğ¸** - Object Storage, Functions, Monitoring

---

## Ğ Ğ¸ÑĞºĞ¸ Ğ¸ Ğ¼Ğ¸Ñ‚Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ

| Ğ Ğ¸ÑĞº | Ğ’ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ | Ğ’Ğ»Ğ¸ÑĞ½Ğ¸Ğµ | ĞœĞ¸Ñ‚Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ |
|------|-------------|---------|-----------|
| ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ñ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸ĞµĞ¹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… | Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ | Ğ’Ñ‹ÑĞ¾ĞºĞ¾Ğµ | Dual-write Ñ€ĞµĞ¶Ğ¸Ğ¼ Ñ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸ĞµĞ¹, Ğ°Ğ»ĞµÑ€Ñ‚Ñ‹ |
| ĞŸĞ¾Ñ‚ĞµÑ€Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¿Ñ€Ğ¸ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ | ĞĞ¸Ğ·ĞºĞ°Ñ | ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ | Supabase Ğ¾ÑÑ‚Ğ°ĞµÑ‚ÑÑ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¼ 30 Ğ´Ğ½ĞµĞ¹, ĞµĞ¶ĞµĞ´Ğ½ĞµĞ²Ğ½Ñ‹Ğµ Ğ±ÑĞºĞ°Ğ¿Ñ‹ |
| ĞĞ¸Ğ·ĞºĞ°Ñ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Yandex | ĞĞ¸Ğ·ĞºĞ°Ñ | Ğ¡Ñ€ĞµĞ´Ğ½ĞµĞµ | Rollback Ğ½Ğ° Supabase Ğ¾Ğ´Ğ½Ğ¾Ğ¹ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾Ğ¹ (DB_MODE) |
| ĞŸÑ€ĞµĞ²Ñ‹ÑˆĞµĞ½Ğ¸Ğµ Ğ³Ñ€Ğ°Ğ½Ñ‚Ğ° 4000â‚½ | Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ | Ğ¡Ñ€ĞµĞ´Ğ½ĞµĞµ | ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ñ€Ğ°ÑÑ…Ğ¾Ğ´Ğ¾Ğ², Ğ°Ğ»ĞµÑ€Ñ‚Ñ‹ Ğ¿Ñ€Ğ¸ 80% Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ |
| ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ñ SSL/ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ°Ğ¼Ğ¸ | ĞĞ¸Ğ·ĞºĞ°Ñ | Ğ¡Ñ€ĞµĞ´Ğ½ĞµĞµ | Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ Yandex, Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° |
| ĞĞµÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ Ğ²ĞµÑ€ÑĞ¸Ğ¹ PostgreSQL | ĞĞ¸Ğ·ĞºĞ°Ñ | ĞĞ¸Ğ·ĞºĞ¾Ğµ | Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ‚Ñƒ Ğ¶Ğµ Ğ²ĞµÑ€ÑĞ¸Ñ (PostgreSQL 15) |

---

## ĞÑ†ĞµĞ½ĞºĞ° ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Yandex Cloud

### ĞĞ°Ñ‡Ğ°Ğ»ÑŒĞ½Ğ°Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
- **ĞšĞ»Ğ°ÑÑ Ñ…Ğ¾ÑÑ‚Ğ°:** s2.small (2 vCPU, 8 GB RAM)
- **Ğ”Ğ¸ÑĞº:** 10 GB SSD
- **Ğ¢Ñ€Ğ°Ñ„Ğ¸Ğº:** ~100 GB/Ğ¼ĞµÑÑÑ†

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ğ½Ğ°Ñ ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ
```
CPU:     2 vCPU Ã— 720 Ñ‡Ğ°ÑĞ¾Ğ² Ã— 1.28â‚½/Ñ‡Ğ°Ñ = 1,843â‚½
RAM:     8 GB Ã— 720 Ñ‡Ğ°ÑĞ¾Ğ² Ã— 0.34â‚½/Ñ‡Ğ°Ñ = 1,958â‚½
Ğ”Ğ¸ÑĞº:    10 GB Ã— 720 Ñ‡Ğ°ÑĞ¾Ğ² Ã— 0.104â‚½/Ñ‡Ğ°Ñ = 749â‚½
Backup:  10 GB Ã— 2.20â‚½/GB = 22â‚½
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Ğ˜Ñ‚Ğ¾Ğ³Ğ¾:   ~4,572â‚½/Ğ¼ĞµÑÑÑ†
```

**Ğ¡ Ğ³Ñ€Ğ°Ğ½Ñ‚Ğ¾Ğ¼ 4000â‚½:** Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹ Ğ¼ĞµÑÑÑ† Ğ¿Ğ¾Ñ‡Ñ‚Ğ¸ Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾!

---

## ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ¸ Ğ°Ğ»ĞµÑ€Ñ‚Ñ‹

### Telegram Ğ°Ğ»ĞµÑ€Ñ‚Ñ‹ (Ñ€Ğ°ÑÑˆĞ¸Ñ€Ğ¸Ñ‚ÑŒ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ÑƒÑ ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ)

```javascript
// Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ² src/utils/telegram-alerts.js
async function sendDatabaseAlert(message, level = 'warning') {
  await sendTelegramMessage(`
ğŸ—„ï¸ Database Alert [${level.toUpperCase()}]

${message}

Time: ${new Date().toISOString()}
Server: ${process.env.SERVER_HOST}
DB Mode: ${process.env.DB_MODE}
  `);
}
```

### ĞĞ»ĞµÑ€Ñ‚Ñ‹:
1. **Sync failures** - Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ > 1% Ğ² Ñ‡Ğ°Ñ
2. **High latency** - latency > 500ms Ğ² 5% Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
3. **Connection errors** - Ğ½Ğµ ÑƒĞ´Ğ°ĞµÑ‚ÑÑ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒÑÑ Ğº Yandex
4. **Cost alerts** - Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ³Ñ€Ğ°Ğ½Ñ‚Ğ° > 80%
5. **Data mismatch** - Ñ€Ğ°ÑÑ…Ğ¾Ğ¶Ğ´ĞµĞ½Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ‘Ğ”

---

## Rollback Strategy

### Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ Ğ¾Ñ‚ĞºĞ°Ñ‚ (< 5 Ğ¼Ğ¸Ğ½ÑƒÑ‚)
```bash
# ĞĞ° ÑĞµÑ€Ğ²ĞµÑ€Ğµ:
ssh -i ~/.ssh/id_ed25519_ai_admin root@46.149.70.219

# Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ñ€ĞµĞ¶Ğ¸Ğ¼:
cd /opt/ai-admin
sed -i 's/DB_MODE=.*/DB_MODE=supabase/' .env

# ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ:
pm2 restart ai-admin-worker-v2

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ:
pm2 logs ai-admin-worker-v2 --lines 50
```

### ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ¾Ñ‚ĞºĞ°Ñ‚ (ĞµÑĞ»Ğ¸ Yandex Ğ½Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚)
1. Ğ’ĞµÑ€Ğ½ÑƒÑ‚ÑŒ `DB_MODE=supabase`
2. ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Ğ² Yandex
3. Ğ’Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ½ĞµĞ´Ğ¾ÑÑ‚Ğ°ÑÑ‰Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸Ğ· Yandex Ğ² Supabase
4. ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ¿Ñ€Ğ¸Ñ‡Ğ¸Ğ½ Ğ¸ Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ¾Ğ¹ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸

---

## Ğ§ĞµĞºĞ»Ğ¸ÑÑ‚ Ğ¿ĞµÑ€ĞµĞ´ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¼ ÑÑ‚Ğ°Ğ¿Ğ¾Ğ¼

### ĞŸĞµÑ€ĞµĞ´ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸ĞµĞ¹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- [ ] Yandex PostgreSQL ĞºĞ»Ğ°ÑÑ‚ĞµÑ€ ÑĞ¾Ğ·Ğ´Ğ°Ğ½ Ğ¸ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½
- [ ] Ğ¡Ñ…ĞµĞ¼Ğ° Ğ‘Ğ” Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ° Ğ² Yandex
- [ ] ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ñ ÑĞµÑ€Ğ²ĞµÑ€Ğ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ (Ñ‚ĞµÑÑ‚ `psql`)
- [ ] Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ñ‹ Ğ±ÑĞºĞ°Ğ¿Ñ‹ Supabase
- [ ] Telegram Ğ°Ğ»ĞµÑ€Ñ‚Ñ‹ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ñ‹

### ĞŸĞµÑ€ĞµĞ´ dual-write
- [ ] Database Adapter Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ½ Ğ¸ Ğ¿Ñ€Ğ¾Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾
- [ ] Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¼Ğ¸Ğ³Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ñ‹ Ğ¸ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ñ‹
- [ ] ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½
- [ ] ĞŸĞ»Ğ°Ğ½ rollback Ğ¿Ğ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ»ĞµĞ½
- [ ] ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ°

### ĞŸĞµÑ€ĞµĞ´ dual-read
- [ ] Dual-write Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ 7+ Ğ´Ğ½ĞµĞ¹ Ğ±ĞµĞ· Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
- [ ] Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ñ‹ (Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ°)
- [ ] Latency Yandex < Supabase + 50ms
- [ ] ĞĞ»ĞµÑ€Ñ‚Ñ‹ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ñ‹ Ğ½Ğ° Ñ‡Ñ‚ĞµĞ½Ğ¸Ğµ

### ĞŸĞµÑ€ĞµĞ´ Ñ„Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ¾Ğ¼
- [ ] Dual-read Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ 7+ Ğ´Ğ½ĞµĞ¹ Ğ±ĞµĞ· Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
- [ ] ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Yandex >= Supabase
- [ ] Ğ’ÑĞµ Ñ‚ĞµÑÑ‚Ñ‹ Ğ¿Ñ€Ğ¾Ğ¹Ğ´ĞµĞ½Ñ‹
- [ ] ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ° Ğº Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ñƒ
- [ ] ĞŸĞ»Ğ°Ğ½ Ğ¾Ñ‚ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Supabase (Ñ‡ĞµÑ€ĞµĞ· 30 Ğ´Ğ½ĞµĞ¹)

---

## Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğµ ÑˆĞ°Ğ³Ğ¸

### Ğ¡ĞµĞ¹Ñ‡Ğ°Ñ (Ğ¾Ğ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ³Ñ€Ğ°Ğ½Ñ‚Ğ°)
1. âœ… Ğ˜Ğ·ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞºÑƒÑ‰ÑƒÑ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ Ğ‘Ğ” - **DONE**
2. âœ… Ğ¡Ğ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñƒ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ - **DONE**
3. âœ… Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ - **DONE**
4. â³ Ğ”Ğ¾Ğ¶Ğ´Ğ°Ñ‚ÑŒÑÑ Ğ¾Ğ´Ğ¾Ğ±Ñ€ĞµĞ½Ğ¸Ñ Ğ³Ñ€Ğ°Ğ½Ñ‚Ğ° Yandex Cloud (Ğ´Ğ¾ 7 Ğ´Ğ½ĞµĞ¹)

### ĞŸĞ¾ÑĞ»Ğµ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ñ Ğ³Ñ€Ğ°Ğ½Ñ‚Ğ°
1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ PostgreSQL ĞºĞ»Ğ°ÑÑ‚ĞµÑ€ Ğ² Yandex Cloud
2. Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¸ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ ÑÑ…ĞµĞ¼Ñƒ Ğ‘Ğ”
3. Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Database Adapter
4. ĞœĞ¸Ğ³Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸ Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ dual-write

### Timeline
- **Ğ”ĞµĞ½ÑŒ 0-7:** ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ³Ñ€Ğ°Ğ½Ñ‚Ğ° (Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹ ÑÑ‚Ğ°Ğ¿)
- **Ğ”ĞµĞ½ÑŒ 8-10:** ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ° Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹
- **Ğ”ĞµĞ½ÑŒ 11-15:** Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Database Adapter
- **Ğ”ĞµĞ½ÑŒ 16:** ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- **Ğ”ĞµĞ½ÑŒ 17-30:** Dual-write Ñ€ĞµĞ¶Ğ¸Ğ¼ (Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ)
- **Ğ”ĞµĞ½ÑŒ 31-37:** Dual-read Ñ€ĞµĞ¶Ğ¸Ğ¼ (Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ)
- **Ğ”ĞµĞ½ÑŒ 38+:** Ğ¤Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´ Ğ½Ğ° Yandex

**Ğ˜Ñ‚Ğ¾Ğ³Ğ¾:** ~38 Ğ´Ğ½ĞµĞ¹ Ğ¾Ñ‚ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ñ Ğ³Ñ€Ğ°Ğ½Ñ‚Ğ° Ğ´Ğ¾ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ³Ğ¾ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ°.

---

## ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ñ‹ Ğ¸ Ñ€ĞµÑÑƒÑ€ÑÑ‹

**Yandex Cloud:**
- ĞšĞ¾Ğ½ÑĞ¾Ğ»ÑŒ: https://console.yandex.cloud/
- Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ: https://yandex.cloud/docs/managed-postgresql/
- ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ°: support@cloud.yandex.ru

**Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ Ğ‘Ğ” (Supabase):**
- Host: aws-0-eu-central-1.pooler.supabase.com
- Dashboard: https://supabase.com/dashboard

**ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚Ñ‹ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹:**
- ĞÑ€ÑĞµĞ½ (Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº): vosarsen
- Ğ¡ĞµÑ€Ğ²ĞµÑ€: root@46.149.70.219

---

**Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½:** 2025-10-31
**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ³Ñ€Ğ°Ğ½Ñ‚Ğ° Yandex Cloud
