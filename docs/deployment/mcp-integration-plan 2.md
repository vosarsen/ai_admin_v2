# MCP Integration Plan –¥–ª—è AI Admin v2

## üéØ –¢–µ–∫—É—â–∏–µ MCP —Å–µ—Ä–≤–µ—Ä—ã

### 1. ‚úÖ Supabase MCP
**–°—Ç–∞—Ç—É—Å**: –£–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: 
- `@supabase query_table` - –∑–∞–ø—Ä–æ—Å—ã –∫ —Ç–∞–±–ª–∏—Ü–∞–º
- `@supabase search_bookings` - –ø–æ–∏—Å–∫ –∑–∞–ø–∏—Å–µ–π
- –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º –±–µ–∑ –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤

### 2. üöß Logs MCP
**–°—Ç–∞—Ç—É—Å**: –°–æ–∑–¥–∞–Ω, —Ç—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
- `@logs logs_tail` - –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏
- `@logs logs_search` - –ø–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
- `@logs pm2_restart` - –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤

## üöÄ –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã–µ MCP —Å–µ—Ä–≤–µ—Ä—ã

### 3. YClients MCP
**–¶–µ–ª—å**: –ü—Ä—è–º–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å YClients API
```javascript
// –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
@yclients get_services company_id=962302
@yclients get_slots company_id=962302 date="2024-07-20"
@yclients create_booking {...booking_data}
@yclients get_booking id=12345
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ë—ã—Å—Ç—Ä–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API endpoints
- –û—Ç–ª–∞–¥–∫–∞ booking flow –±–µ–∑ –∫–æ–¥–∞
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### 4. WhatsApp Test MCP
**–¶–µ–ª—å**: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```javascript
// –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
@whatsapp send_test message="–•–æ—á—É –∑–∞–ø–∏—Å–∞—Ç—å—Å—è" phone="79001234567"
@whatsapp get_last_response
@whatsapp simulate_conversation scenario="booking_flow"
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ù–µ –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç-—Å—Ü–µ–Ω–∞—Ä–∏–∏
- –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 5. Redis Context MCP
**–¶–µ–ª—å**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –¥–∏–∞–ª–æ–≥–æ–≤
```javascript
// –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
@redis get_context phone="79001234567"
@redis clear_context phone="79001234567"
@redis set_context phone="79001234567" data={...}
@redis list_active_conversations
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –û—Ç–ª–∞–¥–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–∏–∞–ª–æ–≥–æ–≤
- –ë—ã—Å—Ç—Ä—ã–π —Å–±—Ä–æ—Å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π

### 6. Deploy MCP
**–¶–µ–ª—å**: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –¥–µ–ø–ª–æ—è
```javascript
// –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
@deploy status
@deploy push_changes
@deploy rollback version="previous"
@deploy run_migrations
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –î–µ–ø–ª–æ–π –≤ –æ–¥–∏–Ω –∫–ª–∏–∫
- –û—Ç–∫–∞—Ç –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö
- –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

### 7. Monitoring MCP
**–¶–µ–ª—å**: Real-time –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```javascript
// –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
@monitor stats
@monitor errors last_hour=1
@monitor performance service="ai-admin-v2"
@monitor queue_status
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ú–µ—Ç—Ä–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ë—ã—Å—Ç—Ä–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
- –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üìã –ü–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

### Phase 1 (–°–µ–π—á–∞—Å)
1. ‚úÖ Supabase MCP - —Ä–∞–±–æ—Ç–∞–µ—Ç
2. üîß –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Logs MCP
3. üîß –°–æ–∑–¥–∞—Ç—å YClients MCP

### Phase 2 (–°–ª–µ–¥—É—é—â–∞—è –Ω–µ–¥–µ–ª—è)
4. WhatsApp Test MCP
5. Redis Context MCP

### Phase 3 (–ü–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
6. Deploy MCP
7. Monitoring MCP

## üí° –ö–∞–∫ —ç—Ç–æ —É—Å–∫–æ—Ä–∏—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É

### –¢–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å (–±–µ–∑ MCP):
1. –ù–∞–ø–∏—Å–∞—Ç—å –∫–æ–¥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ YClients
2. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —á–µ—Ä–µ–∑ SSH
5. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é
6. –°–Ω–æ–≤–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
7. –ü–æ–≤—Ç–æ—Ä–∏—Ç—å...

**–í—Ä–µ–º—è**: 5-10 –º–∏–Ω—É—Ç –Ω–∞ –∏—Ç–µ—Ä–∞—Ü–∏—é

### –° MCP:
1. `@yclients get_slots` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–ª–æ—Ç—ã
2. `@whatsapp send_test` - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç
3. `@logs logs_tail` - –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
4. `@redis get_context` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç

**–í—Ä–µ–º—è**: 30 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∏—Ç–µ—Ä–∞—Ü–∏—é

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
1. **YClients MCP** - –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –Ω—É–∂–µ–Ω –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ booking flow
2. **WhatsApp Test MCP** - —É—Å–∫–æ—Ä–∏—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ 10x

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
3. **Redis Context MCP** - –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π
4. **Deploy MCP** - —É–ø—Ä–æ—Å—Ç–∏—Ç –¥–µ–ø–ª–æ–π

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
5. **Monitoring MCP** - nice to have –¥–ª—è production

## üìù –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö MCP –≤–º–µ—Å—Ç–µ

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ª–æ—Ç—ã
@yclients get_slots company_id=962302 service_id=15031280

# –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
@whatsapp send_test message="–•–æ—á—É –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Å—Ç—Ä–∏–∂–∫—É –∑–∞–≤—Ç—Ä–∞ –≤ 15:00"

# –°–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
@logs logs_tail lines=30

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç
@redis get_context phone="79001234567"

# –ï—Å–ª–∏ –Ω—É–∂–Ω–æ, —Å–º–æ—Ç—Ä–∏–º –≤ –ë–î
@supabase query_table table="bookings" filters={"client_phone": "79001234567"}

# –ï—Å–ª–∏ –≤—Å–µ –æ–∫ - –¥–µ–ø–ª–æ–∏–º
@deploy push_changes
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ MCP —Å–µ—Ä–≤–µ—Ä–∞:
```javascript
// –ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω
const server = new Server({
  name: 'mcp-servicename',
  version: '1.0.0',
});

// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
server.setRequestHandler(ListToolsRequestSchema, async () => ({
  tools: [
    {
      name: 'tool_name',
      description: 'What it does',
      inputSchema: { /* –ø–∞—Ä–∞–º–µ—Ç—Ä—ã */ }
    }
  ]
}));

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–∑–æ–≤–æ–≤
server.setRequestHandler(CallToolRequestSchema, async (request) => {
  // –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
});
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Claude:
1. –î–æ–±–∞–≤–∏—Ç—å –≤ `mcp.json`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Claude Desktop
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ `@servername command`

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–° –ø–æ–ª–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º MCP —Å–µ—Ä–≤–µ—Ä–æ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ AI Admin v2 —Å—Ç–∞–Ω–µ—Ç:
- **–ë—ã—Å—Ç—Ä–µ–µ** –≤ 5-10 —Ä–∞–∑
- **–£–¥–æ–±–Ω–µ–µ** - –≤—Å–µ –≤ –æ–¥–Ω–æ–º –æ–∫–Ω–µ
- **–ù–∞–¥–µ–∂–Ω–µ–µ** - –º–µ–Ω—å—à–µ —Ä—É—á–Ω—ã—Ö –æ—à–∏–±–æ–∫
- **–ü—Ä–æ–∑—Ä–∞—á–Ω–µ–µ** - –≤–∏–¥–Ω–æ –≤—Å–µ —ç—Ç–∞–ø—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏