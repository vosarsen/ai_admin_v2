# –î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä –∑–∞–ø—Ä–æ—Å–∞ –∫ YClients API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª–æ—Ç–æ–≤

## üìã –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ YClients API

### 1. **URL –∑–∞–ø—Ä–æ—Å–∞**

```
GET https://api.yclients.com/api/v1/book_times/{company_id}/{staff_id}/{date}
```

**–ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞**:
```
GET https://api.yclients.com/api/v1/book_times/962302/3413963/2025-08-21
```

–ì–¥–µ:
- `962302` - ID –∫–æ–º–ø–∞–Ω–∏–∏ –≤ YClients (—Å–∞–ª–æ–Ω KULTURA –ú–∞–ª–∞—Ö–æ–≤–∫–∞)
- `3413963` - ID –º–∞—Å—Ç–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ë–∞—Ä–∏)
- `2025-08-21` - –¥–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD

### 2. **Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**

```
?service_id=18356024
```

–ì–¥–µ:
- `service_id` - ID —É—Å–ª—É–≥–∏ –≤ YClients (–Ω–∞–ø—Ä–∏–º–µ—Ä, 18356024 –¥–ª—è –î–ï–¢–°–ö–ê–Ø –°–¢–†–ò–ñ–ö–ê)

**–ü–æ–ª–Ω—ã–π URL —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏**:
```
https://api.yclients.com/api/v1/book_times/962302/3413963/2025-08-21?service_id=18356024
```

### 3. **HTTP –∑–∞–≥–æ–ª–æ–≤–∫–∏**

```http
Content-Type: application/json
Accept: application/vnd.yclients.v2+json
Authorization: Bearer {bearerToken}, User {userToken}
User-Agent: AI-Admin-Enterprise/1.0.0
```

**–ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤**:
```http
Content-Type: application/json
Accept: application/vnd.yclients.v2+json
Authorization: Bearer yusw3yeu6hrr4r9j3gw6, User f0823f5c7a6e4d3bbcd5a1b36d70f67e
User-Agent: AI-Admin-Enterprise/1.0.0
```

### 4. **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞**

–î–ª—è GET –∑–∞–ø—Ä–æ—Å–∞ `/book_times` —Ç–µ–ª–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç (–≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ URL –∏ query string).

## üì• –ß—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç YClients API

### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (200 OK):

```json
{
  "success": true,
  "data": [
    {
      "time": "10:00",
      "datetime": "2025-08-21T10:00:00+03:00",
      "seance_length": 1800,
      "sum_length": 1800,
      "staff_id": 3413963,
      "staff_name": "–ë–∞—Ä–∏"
    },
    {
      "time": "10:30",
      "datetime": "2025-08-21T10:30:00+03:00",
      "seance_length": 1800,
      "sum_length": 1800,
      "staff_id": 3413963,
      "staff_name": "–ë–∞—Ä–∏"
    },
    {
      "time": "11:00",
      "datetime": "2025-08-21T11:00:00+03:00",
      "seance_length": 1800,
      "sum_length": 1800,
      "staff_id": 3413963,
      "staff_name": "–ë–∞—Ä–∏"
    }
  ],
  "meta": []
}
```

### –ï—Å–ª–∏ –Ω–µ—Ç —Å–≤–æ–±–æ–¥–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤:

```json
{
  "success": true,
  "data": [],
  "meta": []
}
```

### –ü—Ä–∏ –æ—à–∏–±–∫–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ–≤–µ—Ä–Ω—ã–π service_id):

```json
{
  "success": false,
  "data": {
    "errors": {
      "service": ["–£—Å–ª—É–≥–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –º–∞—Å—Ç–µ—Ä–∞"]
    }
  },
  "meta": {
    "message": "Validation failed"
  }
}
```

## üîÑ –ü–æ–ª–Ω—ã–π flow –∑–∞–ø—Ä–æ—Å–∞ –≤ –∫–æ–¥–µ

### 1. –í—ã–∑–æ–≤ –∏–∑ command-handler.js:

```javascript
const result = await bookingService.findSuitableSlot({
  companyId: 962302,
  serviceId: 18356024,  // ID —É—Å–ª—É–≥–∏ –î–ï–¢–°–ö–ê–Ø –°–¢–†–ò–ñ–ö–ê
  staffId: 3413963,      // ID –º–∞—Å—Ç–µ—Ä–∞ –ë–∞—Ä–∏
  preferredDate: "2025-08-21"
});
```

### 2. –í booking/index.js —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å:

```javascript
const staffSlots = await this.getAvailableSlots(
  3413963,                    // staffId
  "2025-08-21",               // date
  { service_id: 18356024 },   // params
  962302                      // companyId
);
```

### 3. –í yclients/client.js –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è HTTP –∑–∞–ø—Ä–æ—Å:

```javascript
async getAvailableSlots(staffId, date, params = {}, companyId) {
  const endpoint = `book_times/${companyId}/${staffId}/${date}`;
  // endpoint = "book_times/962302/3413963/2025-08-21"
  
  const queryParams = { service_id: 18356024 };
  
  return this.get(endpoint, queryParams, {
    cacheTtl: 300,  // –ö—ç—à –Ω–∞ 5 –º–∏–Ω—É—Ç
    priority: 'high'
  });
}
```

### 4. Axios –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å:

```javascript
const response = await axios({
  method: 'GET',
  url: 'https://api.yclients.com/api/v1/book_times/962302/3413963/2025-08-21',
  params: { service_id: 18356024 },
  headers: {
    'Content-Type': 'application/json',
    'Accept': 'application/vnd.yclients.v2+json',
    'Authorization': 'Bearer yusw3yeu6hrr4r9j3gw6, User f0823f5c7a6e4d3bbcd5a1b36d70f67e',
    'User-Agent': 'AI-Admin-Enterprise/1.0.0'
  },
  timeout: 30000
});
```

## üîë –í–∞–∂–Ω—ã–µ –¥–µ—Ç–∞–ª–∏

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:
- **Bearer Token** - –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–æ–∫–µ–Ω –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ API (–ø–æ–ª—É—á–∞–µ—Ç—Å—è –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
- **User Token** - —Ç–æ–∫–µ–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ø–æ–ª—É—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ auth endpoint)

### Rate Limiting:
- –ú–∞–∫—Å–∏–º—É–º 500 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —á–∞—Å
- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∂–¥–µ—Ç –µ—Å–ª–∏ –ª–∏–º–∏—Ç –ø—Ä–µ–≤—ã—à–µ–Ω
- –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∏–º–µ—é—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:
- –°–ª–æ—Ç—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 5 –º–∏–Ω—É—Ç
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–ø–∏—Å–∏ –∫—ç—à –æ—á–∏—â–∞–µ—Ç—Å—è
- –ö—ç—à —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ API:

1. **–ú–∞—Å—Ç–µ—Ä –¥–æ–ª–∂–µ–Ω –æ–∫–∞–∑—ã–≤–∞—Ç—å —É—Å–ª—É–≥—É** - –µ—Å–ª–∏ –º–∞—Å—Ç–µ—Ä –Ω–µ –æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—É—é —É—Å–ª—É–≥—É, API –≤–µ—Ä–Ω–µ—Ç –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ —Å–ª–æ—Ç–æ–≤

2. **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É—Å–ª—É–≥–∏ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è** - API –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —Å–ª–æ—Ç—ã –≥–¥–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è —É—Å–ª—É–≥–∏

3. **–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å** - –≤—Ä–µ–º—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ —á–∞—Å–æ–≤–æ–º –ø–æ—è—Å–µ –∫–æ–º–ø–∞–Ω–∏–∏ (+03:00 –¥–ª—è –ú–æ—Å–∫–≤—ã)

4. **seance_length** - –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É—Å–ª—É–≥–∏ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (1800 = 30 –º–∏–Ω—É—Ç)

## üêõ –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ —Å–ª–æ—Ç–æ–≤ –ø—Ä–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–ª–æ—Ç–∞—Ö
**–ü—Ä–∏—á–∏–Ω–∞**: –ú–∞—Å—Ç–µ—Ä –Ω–µ –æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—É—é —É—Å–ª—É–≥—É
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ª—É–≥ –º–∞—Å—Ç–µ—Ä–∞ –≤ YClients

### 2. –û—à–∏–±–∫–∞ 401 Unauthorized
**–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ –∏—Å—Ç–µ–∫—à–∏–π —Ç–æ–∫–µ–Ω
**–†–µ—à–µ–Ω–∏–µ**: –û–±–Ω–æ–≤–∏—Ç—å bearerToken –∏–ª–∏ userToken

### 3. –û—à–∏–±–∫–∞ 429 Too Many Requests
**–ü—Ä–∏—á–∏–Ω–∞**: –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ (500/—á–∞—Å)
**–†–µ—à–µ–Ω–∏–µ**: –ü–æ–¥–æ–∂–¥–∞—Ç—å –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

### 4. –°–ª–æ—Ç—ã –µ—Å—Ç—å –≤ YClients, –Ω–æ API –∏—Ö –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç
**–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è —É—Å–ª—É–≥–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Å—Ç–∞–ª–æ—Å—å 30 –º–∏–Ω—É—Ç, –∞ —É—Å–ª—É–≥–∞ 45 –º–∏–Ω—É—Ç)
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É—Å–ª—É–≥–∏

## üìä –ü—Ä–∏–º–µ—Ä –ª–æ–≥–æ–≤ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞

```
üïê getAvailableSlots called {
  staffId: 3413963,
  date: "2025-08-21",
  params: { service_id: 18356024 },
  companyId: 962302
}

üìã Rate limiter executing request { staffId: 3413963, date: "2025-08-21" }

üö® CRITICAL: Making request to: 
https://api.yclients.com/api/v1/book_times/962302/3413963/2025-08-21?service_id=18356024

üîç YClients API Request [req_1755714038470_ciu5zxb28] attempt 1
  method: GET
  endpoint: book_times/962302/3413963/2025-08-21
  params: { service_id: 18356024 }

üíæ Cache hit for book_times/962302/3413963/2025-08-21

‚úÖ getAvailableSlots completed {
  success: true,
  dataLength: 15,
  sampleData: [
    { time: "10:00", staff_name: "–ë–∞—Ä–∏" },
    { time: "10:30", staff_name: "–ë–∞—Ä–∏" }
  ]
}
```

## üéØ –ò—Ç–æ–≥

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ª–æ—Ç–æ–≤ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ—Å—Ç–æ–π GET –∑–∞–ø—Ä–æ—Å —Å:
1. **URL –ø—É—Ç—å**: —Å–æ–¥–µ—Ä–∂–∏—Ç company_id, staff_id –∏ –¥–∞—Ç—É
2. **Query –ø–∞—Ä–∞–º–µ—Ç—Ä**: service_id –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —É—Å–ª—É–≥–µ
3. **–ó–∞–≥–æ–ª–æ–≤–∫–∏**: –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Bearer –∏ User —Ç–æ–∫–µ–Ω—ã
4. **–û—Ç–≤–µ—Ç**: –º–∞—Å—Å–∏–≤ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–ª–æ—Ç–æ–≤

–°–∏—Å—Ç–µ–º–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:
- –ö—ç—à–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞ 5 –º–∏–Ω—É—Ç
- –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç rate limits
- –ü–æ–≤—Ç–æ—Ä—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏ —Å–±–æ—è—Ö
- –ì—Ä—É–ø–ø–∏—Ä—É–µ—Ç —Å–ª–æ—Ç—ã –ø–æ –º–∞—Å—Ç–µ—Ä–∞–º
- –û—Ä–≥–∞–Ω–∏–∑—É–µ—Ç –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫